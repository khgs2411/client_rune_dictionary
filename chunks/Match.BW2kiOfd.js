import{B as ke,q as _e,c as d,p as i,v as ee,b as e,d as U,r as b,z as I,N as le,O as ue,n as M,F,y as Y,P as G,i as L,_ as O,Q as Z,S as J,h as V,t as v,f as h,T as ce,e as P,U as re,w as W,o as z,G as K,E as de,l as oe,V as Te,W as Me,X as we,Y as Pe,Z as Ae}from"./index.Zhqd4CmU.js";import{s as se}from"./index.BPW4hmtP.js";var Se=({dt:g})=>`
.p-progressspinner {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    display: inline-block;
}

.p-progressspinner::before {
    content: "";
    display: block;
    padding-top: 100%;
}

.p-progressspinner-spin {
    height: 100%;
    transform-origin: center center;
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    animation: p-progressspinner-rotate 2s linear infinite;
}

.p-progressspinner-circle {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: 0;
    stroke: ${g("progressspinner.colorOne")};
    animation: p-progressspinner-dash 1.5s ease-in-out infinite, p-progressspinner-color 6s ease-in-out infinite;
    stroke-linecap: round;
}

@keyframes p-progressspinner-rotate {
    100% {
        transform: rotate(360deg);
    }
}
@keyframes p-progressspinner-dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
    }
}
@keyframes p-progressspinner-color {
    100%,
    0% {
        stroke: ${g("progressspinner.colorOne")};
    }
    40% {
        stroke: ${g("progressspinner.colorTwo")};
    }
    66% {
        stroke: ${g("progressspinner.colorThree")};
    }
    80%,
    90% {
        stroke: ${g("progressspinner.colorFour")};
    }
}
`,Le={root:"p-progressspinner",spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},Re=ke.extend({name:"progressspinner",style:Se,classes:Le}),Ce={name:"BaseProgressSpinner",extends:_e,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},style:Re,provide:function(){return{$pcProgressSpinner:this,$parentInstance:this}}},me={name:"ProgressSpinner",extends:Ce,inheritAttrs:!1,computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}},Ie=["fill","stroke-width"];function Be(g,t,c,r,p,k){return i(),d("div",ee({class:g.cx("root"),role:"progressbar"},g.ptmi("root")),[(i(),d("svg",ee({class:g.cx("spin"),viewBox:"25 25 50 50",style:k.svgStyle},g.ptm("spin")),[e("circle",ee({class:g.cx("circle"),cx:"50",cy:"50",r:"20",fill:g.fill,"stroke-width":g.strokeWidth,strokeMiterlimit:"10"},g.ptm("circle")),null,16,Ie)],16))],16)}me.render=Be;const He={key:0,class:"sparkle-star"},Ne=["width","height"],Ee={key:1,class:"sparkle-diamond"},De=["width","height"],ze=U({__name:"SparkleEffect",props:{count:{default:12},types:{default:()=>["dot","star"]},pattern:{default:"stream"},color:{default:"oklch(0.769 0.188 70.08)"},speed:{default:1},sizeRange:{default:()=>({min:2,max:6})},glow:{type:Boolean,default:!0},density:{default:5},containerClass:{},continuous:{type:Boolean,default:!1},syncWithTimer:{type:Boolean,default:!1}},setup(g){const t=g,c=b([]),r=b(0),p=b(),k=I(()=>t.syncWithTimer?2.664/t.speed:3/t.speed),l=I(()=>t.color||"oklch(0.769 0.188 70.08)");function s(){const m=r.value++,y=t.types,u=y[Math.floor(Math.random()*y.length)],R=["xs","sm","md","lg"],w=R[Math.floor(Math.random()*R.length)],T={xs:.5,sm:.75,md:1,lg:1.5},N=(t.sizeRange.min+Math.random()*(t.sizeRange.max-t.sizeRange.min))*T[w],q=k.value*(.7+Math.random()*.6),j=t.continuous?Math.random()*k.value:Math.random()*.5;let E=0,S=0,B=100,H=0;switch(t.pattern){case"random":E=Math.random()*100,S=Math.random()*100,B=Math.random()*100,H=Math.random()*100;break;case"wave":E=-5,S=20+Math.random()*60,B=105,H=S+(Math.random()-.5)*20;break;case"burst":E=50,S=50;const _=Math.random()*Math.PI*2,f=40+Math.random()*30;B=50+Math.cos(_)*f,H=50+Math.sin(_)*f;break;case"stream":E=-5,S=30+Math.random()*40,B=105,H=S+(Math.random()-.5)*10;break;case"orbit":const D=m*Math.PI*2/t.count;E=50+Math.cos(D)*40,S=50+Math.sin(D)*40,B=50+Math.cos(D+Math.PI)*40,H=50+Math.sin(D+Math.PI)*40;break;case"pulse":const X=Math.random()*Math.PI*2;E=50+Math.cos(X)*10,S=50+Math.sin(X)*10,B=50+Math.cos(X)*50,H=50+Math.sin(X)*50;break}let o;return Math.random()>.7?o="oklch(0.869 0.158 258.76)":Math.random()>.8&&(o="oklch(0.969 0.108 158.76)"),{id:m,type:u,size:w,scale:N,delay:j,duration:q,startX:E,startY:S,endX:B,endY:H,color:o}}function a(){const m=Math.floor(t.count*(t.density/5));c.value=Array.from({length:m},()=>s())}function $(){if(!t.continuous)return;const m=()=>{c.value=c.value.filter(()=>!0),c.value.length<t.count*(t.density/5)&&c.value.push(s()),p.value=requestAnimationFrame(m)};p.value=requestAnimationFrame(m)}return le(()=>{a(),t.continuous&&$()}),ue(()=>{p.value&&cancelAnimationFrame(p.value)}),(m,y)=>(i(),d("div",{class:M(["sparkle-effect-container",m.containerClass])},[(i(!0),d(F,null,Y(c.value,u=>(i(),d("div",{key:u.id,class:M(["sparkle-particle",[`sparkle-${u.type}`,`sparkle-size-${u.size}`,{"sparkle-glow":m.glow}]]),style:G({"--delay":`${u.delay}s`,"--duration":`${u.duration}s`,"--start-x":`${u.startX}%`,"--start-y":`${u.startY}%`,"--end-x":`${u.endX}%`,"--end-y":`${u.endY}%`,"--color":u.color||l.value,"--size":`${u.scale}px`,"--glow-size":`${u.scale*2}px`,animationDelay:`${u.delay}s`,animationDuration:`${u.duration}s`})},[y[2]||(y[2]=e("div",{class:"sparkle-core"},null,-1)),u.type==="star"?(i(),d("div",He,[(i(),d("svg",{viewBox:"0 0 24 24",width:u.scale,height:u.scale},y[0]||(y[0]=[e("path",{d:"M12 2L14.09 8.26L20.78 9.27L16.39 13.36L17.61 20L12 16.67L6.39 20L7.61 13.36L3.22 9.27L9.91 8.26L12 2Z",fill:"currentColor"},null,-1)]),8,Ne))])):u.type==="diamond"?(i(),d("div",Ee,[(i(),d("svg",{viewBox:"0 0 24 24",width:u.scale,height:u.scale},y[1]||(y[1]=[e("path",{d:"M12 2L22 12L12 22L2 12Z",fill:"currentColor"},null,-1)]),8,De))])):L("",!0)],6))),128))],2))}}),te=O(ze,[["__scopeId","data-v-a8e2486e"]]),We={class:"atb-timer-container"},Fe={class:"atb-timer-label"},Ye={class:"timer-text"},Ue={class:"timer-seconds"},Oe={class:"atb-timer-segments"},Ge={class:"atb-timer-icon"},Ve={key:0,class:"atb-timer-flash"},qe={key:0,class:"atb-timer-pulse"},Xe=U({__name:"TurnTimer",props:{timeRemaining:{},duration:{default:5e3},warningThreshold:{default:30},criticalThreshold:{default:60},isActive:{type:Boolean},size:{default:"md"},label:{}},setup(g){const t=g,c=b(t.timeRemaining),r=b(Date.now()),p=b(null),k=()=>{if(!t.isActive||t.timeRemaining<=0){p.value&&(cancelAnimationFrame(p.value),p.value=null);return}const T=Date.now()-r.value,C=Math.max(0,t.timeRemaining-T);c.value=C,p.value=requestAnimationFrame(k)};Z(()=>t.timeRemaining,w=>{c.value=w,r.value=Date.now(),t.isActive&&w>0&&!p.value&&k()}),Z(()=>t.isActive,w=>{w&&t.timeRemaining>0?(r.value=Date.now(),k()):p.value&&(cancelAnimationFrame(p.value),p.value=null)}),ue(()=>{p.value&&cancelAnimationFrame(p.value)});const l=I(()=>t.duration===0?0:Math.min(100,Math.max(0,c.value/t.duration*100))),s=I(()=>Math.ceil(c.value/1e3)),a=I(()=>$.value?"Hurry Up!":m.value?"You're Running Out of Time!":"Time Remainig: "),$=I(()=>l.value<=100-t.warningThreshold&&!m.value),m=I(()=>l.value<=100-t.criticalThreshold),y=I(()=>c.value<=0),u=I(()=>y.value?J.getColor("destructive"):m.value?J.getColor("destructive"):$.value?"oklch(0.769 0.188 70.08)":J.getColor("primary")),R=I(()=>y.value?"pi-exclamation-triangle":m.value?"pi-clock":"pi-hourglass");return(w,T)=>(i(),d("div",{class:M(["atb-timer",{"timer-warning":$.value,"timer-critical":m.value,"timer-expired":y.value}])},[e("div",We,[e("div",Fe,[e("span",Ye,v(a.value),1),e("span",Ue,v(s.value)+"s",1)]),e("div",{class:M(["atb-timer-bar",{heartbeat:w.isActive&&!y.value}])},[T[1]||(T[1]=e("div",{class:"atb-timer-background"},null,-1)),e("div",{class:"atb-timer-fill",style:G({width:l.value+"%",backgroundColor:u.value,transition:"background-color 0.333s ease"})},[T[0]||(T[0]=e("div",{class:"atb-timer-glow"},null,-1)),e("div",Oe,[(i(),d(F,null,Y(4,C=>e("div",{key:C,class:"segment-line",style:G({left:C*25+"%"})},null,4)),64))])],4),e("div",Ge,[e("i",{class:M(["pi",R.value])},null,2)]),m.value?(i(),d("div",Ve)):L("",!0)],2)]),$.value||m.value?(i(),d("div",qe)):L("",!0),w.isActive&&!y.value&&!m.value?(i(),V(te,{key:1,count:8,types:["dot","star"],pattern:"stream",color:u.value,speed:1.5,"size-range":{min:2,max:5},glow:!0,density:6,"sync-with-timer":!0},null,8,["color"])):L("",!0),m.value&&!y.value?(i(),V(te,{key:2,count:15,types:["star","diamond","streak"],pattern:"burst",color:h(J).getColor("destructive"),speed:2,"size-range":{min:3,max:8},glow:!0,density:8,continuous:!0,"sync-with-timer":!0},null,8,["color"])):L("",!0),y.value?(i(),V(te,{key:3,count:20,types:["star","diamond"],pattern:"pulse",color:"oklch(0.969 0.188 70.08)",speed:3,"size-range":{min:4,max:10},glow:!0,density:10,"sync-with-timer":!0})):L("",!0)],2))}}),je=O(Xe,[["__scopeId","data-v-2ff70ece"]]),xe={class:"battle-arena"},Ze={class:"battle-background"},Qe={class:"atmospheric-effects"},Je={class:"turn-badge"},Ke={class:"turn-text"},et={class:"turn-number"},tt={class:"turn-timer-container"},st={class:"battle-field"},at={class:"combatant-area player-area"},nt={class:"atb-side-bars"},it={class:"atb-side-bar left"},rt={class:"atb-segments"},ot={class:"character-card-content"},lt={class:"character-details"},ut={class:"character-header"},ct={class:"character-name"},dt={class:"character-level"},mt={class:"hp-container"},pt={class:"hp-bar"},vt={class:"hp-text"},ht={class:"combatant-area enemy-area"},yt={class:"atb-side-bars"},gt={class:"atb-side-bar right"},ft={class:"atb-segments"},bt={class:"character-card-content"},$t={class:"character-details"},kt={class:"character-header"},_t={class:"character-name"},Tt={class:"character-level"},Mt={class:"hp-container"},wt={class:"hp-bar"},Pt={class:"hp-text"},At=U({__name:"BattleArena",props:{playerName:{default:"You"},playerHealth:{},playerMaxHealth:{},playerLevel:{default:50},enemyName:{},enemyHealth:{},enemyMaxHealth:{},enemyLevel:{default:48},isPlayerTurn:{type:Boolean},isEnemyTurn:{type:Boolean},isWaiting:{type:Boolean},currentTurn:{default:1},timerRemaining:{default:5e3},timerDuration:{default:5e3},timerActive:{type:Boolean,default:!1},playerAtbProgress:{default:0},enemyAtbProgress:{default:0}},setup(g){const t=g,c=I(()=>Math.max(0,Math.min(100,t.playerHealth/t.playerMaxHealth*100))),r=I(()=>Math.max(0,Math.min(100,t.enemyHealth/t.enemyMaxHealth*100)));function p(o){return o>50?"hp-green":o>25?"hp-yellow":"hp-red"}const k=b(1);let l=t.isPlayerTurn;Z(()=>t.isPlayerTurn,o=>{o&&!l&&k.value++,l=o});const s=I(()=>k.value),a=I(()=>t.isWaiting?"":t.isPlayerTurn?"pi-user":"pi-android"),$=I(()=>t.isWaiting?"Waiting...":t.isPlayerTurn?"Your Turn":`${t.enemyName}'s Turn`),m=ce(),{isMobile:y}=m,u=b(!1),R=b(!1),w=b(!1),T=b(!1),C=b([]),N=b([]);let q=0;const j=Math.random()*-2,E=Math.random()*-2;let S=t.playerHealth,B=t.enemyHealth;function H(o,_){const f={id:q++,value:o,isHeal:o>0};_?(C.value.push(f),setTimeout(()=>{C.value=C.value.filter(D=>D.id!==f.id)},1500)):(N.value.push(f),setTimeout(()=>{N.value=N.value.filter(D=>D.id!==f.id)},1500))}return Z(()=>t.playerHealth,o=>{const _=o-S;_!==0&&(H(_,!0),o<S?(u.value=!0,setTimeout(()=>{u.value=!1},600)):o>S&&(w.value=!0,setTimeout(()=>{w.value=!1},600))),S=o}),Z(()=>t.enemyHealth,o=>{const _=o-B;_!==0&&(H(_,!1),o<B?(R.value=!0,setTimeout(()=>{R.value=!1},600)):o>B&&(T.value=!0,setTimeout(()=>{T.value=!1},600))),B=o}),(o,_)=>(i(),d("div",xe,[e("div",Ze,[_[0]||(_[0]=e("div",{class:"gradient-overlay"},null,-1)),e("div",Qe,[(i(),d(F,null,Y(15,f=>e("div",{key:f,class:M(["particle",`particle-${f}`])},null,2)),64))])]),e("div",{class:M(["turn-indicator",{"player-turn":o.isPlayerTurn,"enemy-turn":o.isEnemyTurn}])},[e("div",Je,[e("i",{class:M(["pi",a.value])},null,2),e("span",Ke,v($.value),1),e("span",et,"Turn "+v(s.value),1)]),e("div",tt,[P(je,{"time-remaining":o.timerRemaining,duration:o.timerDuration,"is-active":o.timerActive,size:h(y)?"sm":"md"},null,8,["time-remaining","duration","is-active","size"])])],2),e("div",st,[e("div",at,[P(re,{name:"damage-number"},{default:W(()=>[(i(!0),d(F,null,Y(C.value,f=>(i(),d("div",{key:f.id,class:M(["damage-number",{"heal-number":f.isHeal}])},v(f.isHeal?"+":"-")+v(Math.abs(f.value)),3))),128))]),_:1}),P(h(se),{class:M(["character-card player-card",{"taking-damage":u.value,healing:w.value,breathing:!0}]),style:G({"--health-percentage":c.value,"animation-delay":j+"s"})},{content:W(()=>[e("div",nt,[e("div",it,[e("div",rt,[(i(),d(F,null,Y(10,f=>e("div",{key:f,class:M(["atb-segment",{active:11-f<=o.playerAtbProgress/10}])},null,2)),64))]),_[1]||(_[1]=e("span",{class:"atb-label"},"ATB",-1))])]),e("div",ot,[_[2]||(_[2]=e("div",{class:"character-icon"},[e("i",{class:"pi pi-user"})],-1)),e("div",lt,[e("div",ut,[e("span",ct,v(o.playerName),1),e("span",dt,"Lv"+v(o.playerLevel),1)]),e("div",mt,[e("div",pt,[e("div",{class:M(["hp-bar-fill",[p(c.value),{healing:w.value}]]),style:G({width:c.value+"%"})},null,6)]),e("div",vt,v(o.playerHealth)+"/"+v(o.playerMaxHealth)+" HP",1)])])])]),_:1},8,["class","style"])]),e("div",ht,[P(re,{name:"damage-number"},{default:W(()=>[(i(!0),d(F,null,Y(N.value,f=>(i(),d("div",{key:f.id,class:M(["damage-number",{"heal-number":f.isHeal}])},v(f.isHeal?"+":"-")+v(Math.abs(f.value)),3))),128))]),_:1}),P(h(se),{class:M(["character-card enemy-card",{"taking-damage":R.value,healing:T.value,breathing:!0}]),style:G({"--health-percentage":r.value,"animation-delay":E+"s"})},{content:W(()=>[e("div",yt,[e("div",gt,[e("div",ft,[(i(),d(F,null,Y(10,f=>e("div",{key:f,class:M(["atb-segment",{active:11-f<=o.enemyAtbProgress/10}])},null,2)),64))]),_[3]||(_[3]=e("span",{class:"atb-label"},"ATB",-1))])]),e("div",bt,[_[4]||(_[4]=e("div",{class:"character-icon"},[e("i",{class:"pi pi-android"})],-1)),e("div",$t,[e("div",kt,[e("span",_t,v(o.enemyName),1),e("span",Tt,"Lv"+v(o.enemyLevel),1)]),e("div",Mt,[e("div",wt,[e("div",{class:M(["hp-bar-fill",[p(r.value),{healing:T.value}]]),style:G({width:r.value+"%"})},null,6)]),e("div",Pt,v(o.enemyHealth)+"/"+v(o.enemyMaxHealth)+" HP",1)])])])]),_:1},8,["class","style"])])])]))}}),St=O(At,[["__scopeId","data-v-cb0c8d76"]]),Lt={class:"game-actions"},Rt={key:0,class:"collapsed-content"},Ct={class:"collapsed-inner"},It={key:1,class:"expanded-content"},Bt={key:0,class:"action-prompt"},Ht={key:1,class:"action-prompt"},Nt={key:2,class:"action-prompt"},Et={key:3,class:"action-buttons"},Dt={class:"control-buttons"},zt=U({__name:"GameActions",props:{playerName:{},enemyName:{},isPlayerTurn:{type:Boolean},isEnemyTurn:{type:Boolean},isWaiting:{type:Boolean},isProcessingAction:{type:Boolean}},emits:["attack","leave-match","open-settings","toggle-log"],setup(g){const t=b(!1),c=ce(576),{isMobile:r}=c,p=()=>{r.value||(t.value=!1)};window.addEventListener("resize",p);const k=()=>{t.value=!t.value};return(l,s)=>{const a=de("tooltip");return i(),d("div",Lt,[e("div",{class:M(["action-panel",{expanded:t.value,collapsed:!t.value}])},[!t.value&&h(r)&&l.isPlayerTurn&&!l.isProcessingAction?(i(),d("div",Rt,[e("div",Ct,[P(h(z),{label:"Attack",icon:"pi pi-bolt",severity:"danger",class:"action-btn attack-btn",disabled:l.isProcessingAction,onClick:s[0]||(s[0]=$=>l.$emit("attack"))},null,8,["disabled"]),e("button",{class:"expand-indicator",onClick:k},s[6]||(s[6]=[e("i",{class:"pi pi-angle-double-up"},null,-1)]))])])):L("",!0),t.value&&h(r)||!h(r)||!l.isPlayerTurn||!l.isWaiting?(i(),d("div",It,[l.isPlayerTurn&&!l.isProcessingAction?(i(),d("div",Bt,"What will "+v(l.playerName)+" do?",1)):l.isEnemyTurn?(i(),d("div",Ht,v(l.enemyName)+" is thinking...",1)):l.isWaiting?(i(),d("div",Nt,"Waiting...")):L("",!0),l.isPlayerTurn&&!l.isProcessingAction?(i(),d("div",Et,[P(h(z),{label:"Attack",icon:"pi pi-bolt",severity:"danger",class:"action-btn attack-btn",disabled:l.isProcessingAction,onClick:s[1]||(s[1]=$=>l.$emit("attack"))},null,8,["disabled"]),P(h(z),{label:"Defend",icon:"pi pi-shield",severity:"info",class:"action-btn",disabled:l.isProcessingAction},null,8,["disabled"]),P(h(z),{label:"Item",icon:"pi pi-box",severity:"success",class:"action-btn",disabled:l.isProcessingAction},null,8,["disabled"]),P(h(z),{label:"Run",icon:"pi pi-directions",severity:"warning",class:"action-btn",disabled:l.isProcessingAction,onClick:s[2]||(s[2]=$=>l.$emit("leave-match"))},null,8,["disabled"])])):L("",!0),e("div",Dt,[K(P(h(z),{icon:"pi pi-cog",class:"control-btn",severity:"secondary",text:"",rounded:"",onClick:s[3]||(s[3]=$=>l.$emit("open-settings"))},null,512),[[a,"Settings",void 0,{top:!0}]]),K(P(h(z),{icon:"pi pi-book",class:"control-btn",severity:"secondary",text:"",rounded:"",onClick:s[4]||(s[4]=$=>l.$emit("toggle-log"))},null,512),[[a,"Combat Log",void 0,{top:!0}]]),K(P(h(z),{icon:"pi pi-times",class:"control-btn",severity:"secondary",text:"",rounded:"",onClick:s[5]||(s[5]=$=>l.$emit("leave-match"))},null,512),[[a,"Leave Match",void 0,{top:!0}]])]),h(r)&&l.isPlayerTurn?(i(),d("button",{key:4,class:"collapse-indicator",onClick:k},s[7]||(s[7]=[e("i",{class:"pi pi-angle-double-down"},null,-1)]))):L("",!0)])):L("",!0)],2)])}}}),Wt=O(zt,[["__scopeId","data-v-bc4a8c77"]]),Ft={class:"game-interface"},Yt=U({__name:"GameInterface",props:{matchTypeLabel:{},matchId:{},playerName:{},enemyName:{},gameState:{},isPlayerTurn:{type:Boolean},isEnemyTurn:{type:Boolean},isWaiting:{type:Boolean},isProcessingAction:{type:Boolean},gameLog:{},timerRemaining:{},timerDuration:{},timerActive:{type:Boolean},playerAtbProgress:{},enemyAtbProgress:{}},emits:["attack","leave-match","open-settings","toggle-log"],setup(g){return(t,c)=>(i(),d("div",Ft,[P(St,{"player-health":t.gameState.playerHealth,"player-max-health":t.gameState.playerMaxHealth,"enemy-health":t.gameState.enemyHealth,"enemy-max-health":t.gameState.enemyMaxHealth,"enemy-name":t.enemyName,"is-player-turn":t.isPlayerTurn,"is-enemy-turn":t.isEnemyTurn,"is-waiting":t.isWaiting,"timer-remaining":t.timerRemaining,"timer-duration":t.timerDuration,"timer-active":t.timerActive,"player-atb-progress":t.playerAtbProgress,"enemy-atb-progress":t.enemyAtbProgress},null,8,["player-health","player-max-health","enemy-health","enemy-max-health","enemy-name","is-player-turn","is-enemy-turn","is-waiting","timer-remaining","timer-duration","timer-active","player-atb-progress","enemy-atb-progress"]),P(Wt,{"player-name":t.playerName,"enemy-name":t.enemyName,"is-player-turn":t.isPlayerTurn,"is-enemy-turn":t.isEnemyTurn,"is-waiting":t.isWaiting,"is-processing-action":t.isProcessingAction,onAttack:c[0]||(c[0]=r=>t.$emit("attack")),onLeaveMatch:c[1]||(c[1]=r=>t.$emit("leave-match")),onOpenSettings:c[2]||(c[2]=r=>t.$emit("open-settings")),onToggleLog:c[3]||(c[3]=r=>t.$emit("toggle-log"))},null,8,["player-name","enemy-name","is-player-turn","is-enemy-turn","is-waiting","is-processing-action"])]))}}),Ut=O(Yt,[["__scopeId","data-v-10742bc3"]]),Ot={class:"match-lobby"},Gt={class:"flex gap large wrap match-card-wrapper"},Vt={key:0,class:"wip-badge"},qt={class:"card-header-container"},Xt=["alt","src"],jt={key:0,class:"loading-overlay"},xt={class:"text-center flex"},Zt={class:"text-center flex"},Qt={class:"flex text-center"},Jt=U({__name:"MatchLobby",props:{matchCards:{},imageUrl:{}},emits:["matchTypeSelected"],setup(g,{emit:t}){const c=t;function r(p){c("matchTypeSelected",p)}return(p,k)=>{const l=de("ripple");return i(),d("div",Ot,[e("div",Gt,[(i(!0),d(F,null,Y(p.matchCards,s=>(i(),d("div",{key:s.type,class:"match-card-wrapper-outer"},[s.wip?(i(),d("span",Vt,"WIP")):L("",!0),K((i(),V(h(se),{class:M(["match-card",s.type,{disabled:s.disabled||s.loading,loading:s.loading}]),onClick:a=>!s.disabled&&!s.loading&&r(s)},{header:W(()=>[e("div",qt,[e("img",{alt:`${s.type} header`,class:"card-image",src:`${p.imageUrl}match.webp`},null,8,Xt),s.loading?(i(),d("div",jt,[P(h(me),{size:"large","stroke-width":"3"}),k[0]||(k[0]=e("p",null,"Starting match...",-1))])):L("",!0)])]),title:W(()=>[e("span",xt,v(s.title),1)]),subtitle:W(()=>[e("span",Zt,v(s.subtitle),1)]),content:W(()=>[e("p",Qt,v(s.content),1)]),_:2},1032,["class","onClick"])),[[l]])]))),128))])])}}}),Kt=O(Jt,[["__scopeId","data-v-9c28998f"]]),es={class:"match-result-screen"},ts={class:"result-header"},ss={class:"result-title"},as={class:"result-subtitle"},ns={class:"result-stats"},is={class:"stat-row"},rs={class:"stat-value"},os={class:"stat-row"},ls={class:"stat-value"},us={class:"stat-row"},cs={class:"stat-value"},ds={class:"stat-row"},ms={class:"stat-value"},ps={class:"session-stats"},vs={class:"stats-grid"},hs={class:"stat-item"},ys={class:"stat-number"},gs={class:"stat-item"},fs={class:"stat-number"},bs={class:"stat-item"},$s={class:"stat-number"},ks={class:"stat-item"},_s={class:"stat-number"},Ts={class:"result-actions"},Ms=U({__name:"MatchResult",props:{matchResult:{},sessionStats:{},isLoading:{type:Boolean}},emits:["rematch","returnToLobby"],setup(g){const t=g;function c(){var a;return((a=t.matchResult)==null?void 0:a.result)||"disconnect"}function r(){var a;switch((a=t.matchResult)==null?void 0:a.result){case"victory":return"pi pi-trophy";case"defeat":return"pi pi-times-circle";case"draw":return"pi pi-minus-circle";default:return"pi pi-info-circle"}}function p(){var a;switch((a=t.matchResult)==null?void 0:a.result){case"victory":return"Victory!";case"defeat":return"Defeat";case"draw":return"Draw";default:return"Match Complete"}}function k(){var a;switch((a=t.matchResult)==null?void 0:a.result){case"victory":return"You defeated the AI opponent!";case"defeat":return"The AI opponent proved too strong.";case"draw":return"Both fighters fell in battle.";default:return"The match has ended."}}function l(s){const a=Math.floor(s/60),$=s%60;return`${a}:${$.toString().padStart(2,"0")}`}return(s,a)=>{var $,m,y,u;return i(),d("div",es,[e("div",{class:M(["result-container",c()])},[e("div",ts,[e("div",{class:M(["result-icon",c()])},[e("i",{class:M(r())},null,2)],2),e("h2",ss,v(p()),1),e("p",as,v(k()),1)]),e("div",ns,[e("div",is,[a[2]||(a[2]=e("span",{class:"stat-label"},"Match Duration:",-1)),e("span",rs,v(l((($=s.matchResult)==null?void 0:$.duration)||0)),1)]),e("div",os,[a[3]||(a[3]=e("span",{class:"stat-label"},"Your Health:",-1)),e("span",ls,v(((m=s.matchResult)==null?void 0:m.playerHealth)||0)+" HP",1)]),e("div",us,[a[4]||(a[4]=e("span",{class:"stat-label"},"Enemy Health:",-1)),e("span",cs,v(((y=s.matchResult)==null?void 0:y.enemyHealth)||0)+" HP",1)]),e("div",ds,[a[5]||(a[5]=e("span",{class:"stat-label"},"Actions Performed:",-1)),e("span",ms,v(((u=s.matchResult)==null?void 0:u.actionsPerformed)||0),1)])]),e("div",ps,[a[10]||(a[10]=e("h3",null,"Session Statistics",-1)),e("div",vs,[e("div",hs,[e("span",ys,v(s.sessionStats.victories),1),a[6]||(a[6]=e("span",{class:"stat-text"},"Victories",-1))]),e("div",gs,[e("span",fs,v(s.sessionStats.defeats),1),a[7]||(a[7]=e("span",{class:"stat-text"},"Defeats",-1))]),e("div",bs,[e("span",$s,v(s.sessionStats.winRate)+"%",1),a[8]||(a[8]=e("span",{class:"stat-text"},"Win Rate",-1))]),e("div",ks,[e("span",_s,v(s.sessionStats.totalMatches),1),a[9]||(a[9]=e("span",{class:"stat-text"},"Total Matches",-1))])])]),e("div",Ts,[P(h(z),{loading:s.isLoading,onClick:a[0]||(a[0]=R=>s.$emit("rematch")),severity:"success",size:"large",class:"rematch-button"},{default:W(()=>a[11]||(a[11]=[e("i",{class:"pi pi-refresh"},null,-1),oe(" Rematch ")])),_:1},8,["loading"]),P(h(z),{onClick:a[1]||(a[1]=R=>s.$emit("returnToLobby")),disabled:s.isLoading,size:"large",class:"lobby-button"},{default:W(()=>a[12]||(a[12]=[e("i",{class:"pi pi-home"},null,-1),oe(" Return to Lobby ")])),_:1},8,["disabled"])])],2)])}}}),ws=O(Ms,[["__scopeId","data-v-18bcc071"]]),Ps={class:"match"},As={class:"content"},Ss=U({__name:"Match",setup(g){const t="/client_rune_dictionary/";document.documentElement.style.setProperty("--match-bg-url",`url(${t}match.webp)`);const c=Te(),r=Me(),{inLobby:p,inMatch:k,isFinished:l}=r,s=b(!1),a=b(!1),$=b(!0),m=b(!1),y=b([]),u=b(null),R=b(5e3),w=b(5e3),T=b(!1),C=b(0),N=b(0);we("match",{onPlayerTurn:_,onEnemyTurn:f,onWaitingForTurn:D,onLogEntry:x,onTimerUpdate:X,onTimerExpired:pe,onATBProgressUpdate:ve});const q=b([{type:"pve",title:"Player versus Environment",subtitle:"Challenge the environment",content:"Face off against AI-controlled opponents and test your strategies.",wip:!1,disabled:!1,loading:!1},{type:"pvp",title:"Player versus Player",subtitle:"Challenge other players to a duel",content:"Test your skills against other players in real-time combat using your runeabilities.",wip:!0,disabled:!0,loading:!1}]);async function j(n){n.type==="pve"?await E(n):await he(n)}async function E(n){if(!n.loading)try{if(n.loading=!0,Q("pvp","disabled",!0),k.value){c.toast.error("You are already in a match","center");return}u.value="pve",S(),await r.pve()}catch(A){console.error("PVE match error:",A),c.toast.error("Something went wrong","center")}finally{Q("pvp","disabled",!0),n.loading=!1}}function S(){var n,A;s.value=!1,a.value=!1,m.value=!1,y.value=[],R.value=((n=r.store.timerInfo)==null?void 0:n.duration)||3e3,w.value=((A=r.store.timerInfo)==null?void 0:A.duration)||3e3,T.value=!1,C.value=0,N.value=0,x({type:"system",message:"Match started! Waiting for server to start first turn..."})}function B(){return u.value?u.value==="pve"?"Player vs AI":"Player vs Player":"Unknown Match"}function H(){return u.value?u.value==="pve"?"AI Opponent":"Enemy Player":"Enemy"}async function o(n){if(!(!s.value||m.value))try{m.value=!0,Ae.Next("match",{cta:"match.action",data:{type:"match.action",actionType:n,matchId:r.store.currentMatchId,channelId:r.store.currentChannelId}})}catch(A){console.error("Attack failed:",A),c.toast.error("Attack failed","center"),m.value=!1}}function _(n){s.value=!0,a.value=!1,$.value=!1,m.value=!1,T.value=!0,C.value=100;const A=n!=null&&n.turnNumber?`Your turn! (Turn ${n.turnNumber})`:"Your turn!";x({type:"system",message:A})}function f(n){s.value=!1,a.value=!0,$.value=!1,T.value=!0,N.value=100;const A=n!=null&&n.turnNumber?`${H()}'s turn... (Turn ${n.turnNumber})`:`${H()}'s turn...`;x({type:"system",message:A})}function D(){s.value=!1,a.value=!1,$.value=!0,m.value=!1,T.value=!1}function X(n){if(typeof n.remaining!="number"||typeof n.duration!="number"){console.warn("Invalid timer update data:",n);return}R.value=Math.max(0,n.remaining),w.value=n.duration,!T.value&&n.remaining>0&&!$.value&&(T.value=!0)}function pe(n){T.value=!1,R.value=0;const A=n!=null&&n.turnNumber?`Turn ${n.turnNumber}`:"Current turn";x({type:"system",message:`${A}: Time's up! Automatic PASS action.`})}function ve(n){if(!n||typeof n!="object"){console.warn("Invalid ATB progress data:",n);return}n.player&&typeof n.player.readiness=="number"&&(C.value=Math.max(0,Math.min(100,n.player.readiness))),n.enemy&&typeof n.enemy.readiness=="number"&&(N.value=Math.max(0,Math.min(100,n.enemy.readiness)))}function x(n){y.value.unshift({type:n.type,message:n.message,timestamp:new Date}),y.value.length>50&&(y.value=y.value.slice(-50))}async function he(n){n.loading=!0,Q("pve","disabled",!0),n.disabled=!0,Q("pve","disabled",!1)}function Q(n,A,ne){const ie=q.value.find($e=>$e.type===n);ie&&(ie[A]=ne)}function ye(){return r.getMatchStats()}async function ge(){try{await r.startRematch()}catch(n){console.error("Failed to start rematch:",n)}}function ae(){r.returnToLobby()}function fe(){console.log("Open settings")}function be(){console.log("Toggle combat log")}return le(()=>{Pe.IsNil(u.value)&&r.returnToLobby()}),(n,A)=>(i(),d("div",Ps,[e("div",{class:M(["viewport",{opaque:h(p),background:h(k)}])},[e("div",As,[h(p)?(i(),V(Kt,{key:0,"match-cards":q.value,"image-url":h(t),onMatchTypeSelected:j},null,8,["match-cards","image-url"])):L("",!0),h(l)?(i(),V(ws,{key:1,"match-result":h(r).store.matchResult,"session-stats":ye(),"is-loading":h(r).loading.api||h(r).loading.match,onRematch:ge,onReturnToLobby:ae},null,8,["match-result","session-stats","is-loading"])):L("",!0),h(k)?(i(),V(Ut,{key:2,"match-type-label":B(),"match-id":h(r).store.currentMatchId,"player-name":"You","enemy-name":H(),"game-state":h(r).store.gameState,"is-player-turn":s.value,"is-enemy-turn":a.value,"is-waiting":$.value,"is-processing-action":m.value,"game-log":y.value,"timer-remaining":R.value,"timer-duration":w.value,"timer-active":T.value,"player-atb-progress":C.value,"enemy-atb-progress":N.value,onLeaveMatch:ae,onAttack:A[0]||(A[0]=ne=>o("attack")),onOpenSettings:fe,onToggleLog:be},null,8,["match-type-label","match-id","enemy-name","game-state","is-player-turn","is-enemy-turn","is-waiting","is-processing-action","game-log","timer-remaining","timer-duration","timer-active","player-atb-progress","enemy-atb-progress"])):L("",!0)])],2)]))}}),Cs=O(Ss,[["__scopeId","data-v-390b9cce"]]);export{Cs as default};
