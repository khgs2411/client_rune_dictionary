import{d as m,u as k,c as P,w as p,r as L,m as S,a as l,P as C,o as c,b as q,e as B,v as N,f as _,n as E,g as A,i as I,h as M,j as U,k as x,l as w,p as r,q as $,s as R,t as i,x as y,_ as z,y as D,z as b}from"./index.fUfiaqmr.js";import{A as j}from"./auth.api.HjpFv0WD.js";var T=m({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(d){const n=d;return k(),(a,t)=>(c(),P(l(C),S(n,{onMousedown:t[0]||(t[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:p(()=>[L(a.$slots,"default")]),_:3},16))}}),F=T;const h=m({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(d,{emit:n}){const a=d,s=q(a,"modelValue",n,{passive:!0,defaultValue:a.defaultValue});return(u,o)=>B((c(),_("input",{"onUpdate:modelValue":o[0]||(o[0]=f=>I(s)?s.value=f:null),class:E(l(A)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a.class))},null,2)),[[N,l(s)]])}}),V=m({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(d){const n=d,a=M(n,"class");return(t,s)=>(c(),P(l(F),S(l(a),{class:l(A)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n.class)}),{default:p(()=>[L(t.$slots,"default")]),_:3},16,["class"]))}}),G={class:"min-h-svh w-full flex items-center justify-center bg-background px-4 py-8"},O={class:"w-full max-w-sm space-y-6"},H={class:"rounded-lg border border-border bg-card p-6 shadow-lg space-y-4"},J={class:"space-y-2"},K={class:"space-y-2"},Q={key:0,class:"rounded-md bg-destructive/10 p-3 text-sm text-destructive"},Y=m({__name:"Login",setup(d){const n=D(),a=U(),t=x(()=>a.username),s=x(()=>a.password),u=w(!1),o=w("");async function f(){if(!t.value||!s.value){o.value="Please enter both username and password";return}u.value=!0,o.value="";try{const e=await new j().login(t.value,s.value);e.authorized?(console.log("✅ Login successful!"),a.setAuth(t.value),n.push("/game")):o.value=e.msg||"Login failed"}catch(v){console.error("❌ Login error:",v),o.value="An error occurred. Please try again."}finally{u.value=!1}}return(v,e)=>(c(),_("div",G,[r("div",O,[e[4]||(e[4]=r("div",{class:"text-center space-y-1"},[r("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"RUNE RPG"),r("p",{class:"text-sm text-muted-foreground"},"Sign in to continue")],-1)),r("div",H,[r("form",{onSubmit:$(f,["prevent"]),class:"space-y-4"},[r("div",J,[i(l(V),{for:"username"},{default:p(()=>[...e[2]||(e[2]=[b("Username",-1)])]),_:1}),i(l(h),{id:"username",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=g=>t.value=g),type:"text",placeholder:"Enter username",required:"",disabled:u.value,autocomplete:"username"},null,8,["modelValue","disabled"])]),r("div",K,[i(l(V),{for:"password"},{default:p(()=>[...e[3]||(e[3]=[b("Password",-1)])]),_:1}),i(l(h),{id:"password",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=g=>s.value=g),type:"password",placeholder:"Enter password",required:"",disabled:u.value,autocomplete:"current-password"},null,8,["modelValue","disabled"])]),o.value?(c(),_("div",Q,y(o.value),1)):R("",!0),i(l(z),{type:"submit",class:"w-full h-11",disabled:u.value},{default:p(()=>[b(y(u.value?"Signing in...":"Sign In"),1)]),_:1},8,["disabled"])],32)]),e[5]||(e[5]=r("p",{class:"text-center text-xs text-muted-foreground"},"Need an account? Contact admin",-1))])]))}});export{Y as default};
