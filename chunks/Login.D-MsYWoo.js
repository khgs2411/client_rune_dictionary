import{d as b,u as q,c as A,w as p,r as h,m as L,a as s,P as U,o as m,b as E,e as I,v as D,f as _,n as z,g as x,i as R,h as G,j as T,k as W,l as j,p as V,q as C,s as r,t as c,x as F,y as O,z as k,_ as w,A as Y,B as g,C as H}from"./index.CPyZwT_1.js";var J=b({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(i){const o=i;return q(),(t,d)=>(m(),A(s(U),L(o,{onMousedown:d[0]||(d[0]=a=>{!a.defaultPrevented&&a.detail>1&&a.preventDefault()})}),{default:p(()=>[h(t.$slots,"default")]),_:3},16))}}),K=J;const P=b({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(i,{emit:o}){const t=i,a=E(t,"modelValue",o,{passive:!0,defaultValue:t.defaultValue});return(v,l)=>I((m(),_("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>R(a)?a.value=u:null),class:z(s(x)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t.class))},null,2)),[[D,s(a)]])}}),S=b({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(i){const o=i,t=G(o,"class");return(d,a)=>(m(),A(s(K),L(s(t),{class:s(x)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",o.class)}),{default:p(()=>[h(d.$slots,"default")]),_:3},16,["class"]))}}),Q=T("flex w-fit items-stretch [&>*:focus-visible]:z-10 [&>*:focus-visible]:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}}),X=["data-orientation"],Z=b({__name:"ButtonGroup",props:{class:{},orientation:{}},setup(i){const o=i;return(t,d)=>(m(),_("div",{role:"group","data-slot":"button-group","data-orientation":o.orientation,class:z(s(x)(s(Q)({orientation:o.orientation}),o.class))},[h(t.$slots,"default")],10,X))}}),ee={class:"min-h-svh w-full flex items-center justify-center bg-background px-4 py-8"},te={class:"absolute top-20 right-4"},se={class:"w-full max-w-sm space-y-6"},ae={class:"rounded-lg border border-border bg-card p-6 shadow-lg space-y-4"},oe={class:"space-y-2"},ne={class:"space-y-2"},re={key:0,class:"rounded-md bg-destructive/10 p-3 text-sm text-destructive"},ie=b({__name:"Login",setup(i){const o=Y(),t=W(),d=j(),a=V(()=>t.username),v=V(()=>t.password),l=C(!1),u=C(""),$=[{username:"tal",password:"Aa123123"},{username:"yazin",password:"r_d_0733e6dd-f421-46cf-bf8a-72a2898f91e6"}];function y(f,e){f.preventDefault();const n=$.find(N=>N.username===e);n&&(t.username=n.username,t.password=n.password)}async function B(){if(!t.isAuthenticated){console.warn("[WebSocketManager] Cannot connect: Not authenticated");return}try{await d.connect()}catch(f){console.error("[WebSocketManager] Connection failed:",f)}}async function M(){if(!a.value||!v.value){u.value="Please enter both username and password";return}l.value=!0,u.value="";try{const e=await new H().login(a.value,v.value);e.authorized?(console.log("✅ Login successful!"),t.setAuth(a.value),await B(),o.push("/game")):u.value=e.msg||"Login failed"}catch(f){console.error("❌ Login error:",f),u.value="An error occurred. Please try again."}finally{l.value=!1}}return(f,e)=>(m(),_("div",ee,[r("div",te,[c(Z,null,{default:p(()=>[c(s(w),{variant:"outline",onClick:e[0]||(e[0]=n=>y(n,"tal"))},{default:p(()=>[...e[4]||(e[4]=[g("Tal",-1)])]),_:1}),c(s(w),{variant:"outline",onClick:e[1]||(e[1]=n=>y(n,"yazin"))},{default:p(()=>[...e[5]||(e[5]=[g("Yazin",-1)])]),_:1})]),_:1})]),r("div",se,[e[8]||(e[8]=r("div",{class:"text-center space-y-1"},[r("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"RUNE RPG"),r("p",{class:"text-sm text-muted-foreground"},"Sign in to continue")],-1)),r("div",ae,[r("form",{onSubmit:F(M,["prevent"]),class:"space-y-4"},[r("div",oe,[c(s(S),{for:"username"},{default:p(()=>[...e[6]||(e[6]=[g("Username",-1)])]),_:1}),c(s(P),{id:"username",modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value=n),type:"text",placeholder:"Enter username",required:"",disabled:l.value,autocomplete:"username"},null,8,["modelValue","disabled"])]),r("div",ne,[c(s(S),{for:"password"},{default:p(()=>[...e[7]||(e[7]=[g("Password",-1)])]),_:1}),c(s(P),{id:"password",modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=n=>v.value=n),type:"password",placeholder:"Enter password",required:"",disabled:l.value,autocomplete:"current-password"},null,8,["modelValue","disabled"])]),u.value?(m(),_("div",re,k(u.value),1)):O("",!0),c(s(w),{type:"submit",class:"w-full h-11",disabled:l.value},{default:p(()=>[g(k(l.value?"Signing in...":"Sign In"),1)]),_:1},8,["disabled"])],32)]),e[9]||(e[9]=r("p",{class:"text-center text-xs text-muted-foreground"},"Need an account? Contact admin",-1))])]))}});export{ie as default};
