import{B as $e,q as ke,c,p as o,v as ee,b as e,d as Y,r as b,z as L,N as le,O as ue,n as k,F as z,y as F,P as O,i as S,_ as U,Q as j,S as K,h as G,t as h,f as $,e as M,T as re,w as N,o as H,G as x,E as ce,l as oe,U as Te,V as _e,W as Me,X as we,Y as Pe}from"./index.Dafi7miu.js";import{s as se}from"./index.BiKjX5t8.js";var Ae=({dt:f})=>`
.p-progressspinner {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    display: inline-block;
}

.p-progressspinner::before {
    content: "";
    display: block;
    padding-top: 100%;
}

.p-progressspinner-spin {
    height: 100%;
    transform-origin: center center;
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    animation: p-progressspinner-rotate 2s linear infinite;
}

.p-progressspinner-circle {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: 0;
    stroke: ${f("progressspinner.colorOne")};
    animation: p-progressspinner-dash 1.5s ease-in-out infinite, p-progressspinner-color 6s ease-in-out infinite;
    stroke-linecap: round;
}

@keyframes p-progressspinner-rotate {
    100% {
        transform: rotate(360deg);
    }
}
@keyframes p-progressspinner-dash {
    0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
    }
    100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
    }
}
@keyframes p-progressspinner-color {
    100%,
    0% {
        stroke: ${f("progressspinner.colorOne")};
    }
    40% {
        stroke: ${f("progressspinner.colorTwo")};
    }
    66% {
        stroke: ${f("progressspinner.colorThree")};
    }
    80%,
    90% {
        stroke: ${f("progressspinner.colorFour")};
    }
}
`,Se={root:"p-progressspinner",spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},Re=$e.extend({name:"progressspinner",style:Ae,classes:Se}),Le={name:"BaseProgressSpinner",extends:ke,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},style:Re,provide:function(){return{$pcProgressSpinner:this,$parentInstance:this}}},de={name:"ProgressSpinner",extends:Le,inheritAttrs:!1,computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}},Ce=["fill","stroke-width"];function Ie(f,t,u,d,n,m){return o(),c("div",ee({class:f.cx("root"),role:"progressbar"},f.ptmi("root")),[(o(),c("svg",ee({class:f.cx("spin"),viewBox:"25 25 50 50",style:m.svgStyle},f.ptm("spin")),[e("circle",ee({class:f.cx("circle"),cx:"50",cy:"50",r:"20",fill:f.fill,"stroke-width":f.strokeWidth,strokeMiterlimit:"10"},f.ptm("circle")),null,16,Ce)],16))],16)}de.render=Ie;const Be={key:0,class:"sparkle-star"},He=["width","height"],Ne={key:1,class:"sparkle-diamond"},Ee=["width","height"],De=Y({__name:"SparkleEffect",props:{count:{default:12},types:{default:()=>["dot","star"]},pattern:{default:"stream"},color:{default:"oklch(0.769 0.188 70.08)"},speed:{default:1},sizeRange:{default:()=>({min:2,max:6})},glow:{type:Boolean,default:!0},density:{default:5},containerClass:{},continuous:{type:Boolean,default:!1},syncWithTimer:{type:Boolean,default:!1}},setup(f){const t=f,u=b([]),d=b(0),n=b(),m=L(()=>t.syncWithTimer?2.664/t.speed:3/t.speed),_=L(()=>t.color||"oklch(0.769 0.188 70.08)");function s(){const y=d.value++,v=t.types,l=v[Math.floor(Math.random()*v.length)],P=["xs","sm","md","lg"],C=P[Math.floor(Math.random()*P.length)],T={xs:.5,sm:.75,md:1,lg:1.5},I=(t.sizeRange.min+Math.random()*(t.sizeRange.max-t.sizeRange.min))*T[C],E=m.value*(.7+Math.random()*.6),W=t.continuous?Math.random()*m.value:Math.random()*.5;let B=0,r=0,g=100,p=0;switch(t.pattern){case"random":B=Math.random()*100,r=Math.random()*100,g=Math.random()*100,p=Math.random()*100;break;case"wave":B=-5,r=20+Math.random()*60,g=105,p=r+(Math.random()-.5)*20;break;case"burst":B=50,r=50;const Z=Math.random()*Math.PI*2,Q=40+Math.random()*30;g=50+Math.cos(Z)*Q,p=50+Math.sin(Z)*Q;break;case"stream":B=-5,r=30+Math.random()*40,g=105,p=r+(Math.random()-.5)*10;break;case"orbit":const V=y*Math.PI*2/t.count;B=50+Math.cos(V)*40,r=50+Math.sin(V)*40,g=50+Math.cos(V+Math.PI)*40,p=50+Math.sin(V+Math.PI)*40;break;case"pulse":const q=Math.random()*Math.PI*2;B=50+Math.cos(q)*10,r=50+Math.sin(q)*10,g=50+Math.cos(q)*50,p=50+Math.sin(q)*50;break}let D;return Math.random()>.7?D="oklch(0.869 0.158 258.76)":Math.random()>.8&&(D="oklch(0.969 0.108 158.76)"),{id:y,type:l,size:C,scale:I,delay:W,duration:E,startX:B,startY:r,endX:g,endY:p,color:D}}function i(){const y=Math.floor(t.count*(t.density/5));u.value=Array.from({length:y},()=>s())}function w(){if(!t.continuous)return;const y=()=>{u.value=u.value.filter(()=>!0),u.value.length<t.count*(t.density/5)&&u.value.push(s()),n.value=requestAnimationFrame(y)};n.value=requestAnimationFrame(y)}return le(()=>{i(),t.continuous&&w()}),ue(()=>{n.value&&cancelAnimationFrame(n.value)}),(y,v)=>(o(),c("div",{class:k(["sparkle-effect-container",y.containerClass])},[(o(!0),c(z,null,F(u.value,l=>(o(),c("div",{key:l.id,class:k(["sparkle-particle",[`sparkle-${l.type}`,`sparkle-size-${l.size}`,{"sparkle-glow":y.glow}]]),style:O({"--delay":`${l.delay}s`,"--duration":`${l.duration}s`,"--start-x":`${l.startX}%`,"--start-y":`${l.startY}%`,"--end-x":`${l.endX}%`,"--end-y":`${l.endY}%`,"--color":l.color||_.value,"--size":`${l.scale}px`,"--glow-size":`${l.scale*2}px`,animationDelay:`${l.delay}s`,animationDuration:`${l.duration}s`})},[v[2]||(v[2]=e("div",{class:"sparkle-core"},null,-1)),l.type==="star"?(o(),c("div",Be,[(o(),c("svg",{viewBox:"0 0 24 24",width:l.scale,height:l.scale},v[0]||(v[0]=[e("path",{d:"M12 2L14.09 8.26L20.78 9.27L16.39 13.36L17.61 20L12 16.67L6.39 20L7.61 13.36L3.22 9.27L9.91 8.26L12 2Z",fill:"currentColor"},null,-1)]),8,He))])):l.type==="diamond"?(o(),c("div",Ne,[(o(),c("svg",{viewBox:"0 0 24 24",width:l.scale,height:l.scale},v[1]||(v[1]=[e("path",{d:"M12 2L22 12L12 22L2 12Z",fill:"currentColor"},null,-1)]),8,Ee))])):S("",!0)],6))),128))],2))}}),te=U(De,[["__scopeId","data-v-a8e2486e"]]),We={class:"atb-timer-container"},ze={class:"atb-timer-label"},Fe={class:"timer-text"},Ye={class:"timer-seconds"},Ue={class:"atb-timer-segments"},Oe={class:"atb-timer-icon"},Ge={key:0,class:"atb-timer-flash"},Ve={key:0,class:"atb-timer-pulse"},qe=Y({__name:"TurnTimer",props:{timeRemaining:{},duration:{default:5e3},warningThreshold:{default:30},criticalThreshold:{default:60},isActive:{type:Boolean},size:{default:"md"},label:{}},setup(f){const t=f,u=b(t.timeRemaining),d=b(Date.now()),n=b(null),m=()=>{if(!t.isActive||t.timeRemaining<=0){n.value&&(cancelAnimationFrame(n.value),n.value=null);return}const R=Date.now()-d.value,I=Math.max(0,t.timeRemaining-R);u.value=I,n.value=requestAnimationFrame(m)};j(()=>t.timeRemaining,T=>{u.value=T,d.value=Date.now(),t.isActive&&T>0&&!n.value&&m()}),j(()=>t.isActive,T=>{T&&t.timeRemaining>0?(d.value=Date.now(),m()):n.value&&(cancelAnimationFrame(n.value),n.value=null)}),ue(()=>{n.value&&cancelAnimationFrame(n.value)});const _=L(()=>t.duration===0?0:Math.min(100,Math.max(0,u.value/t.duration*100))),s=L(()=>_.value),i=L(()=>Math.ceil(u.value/1e3)),w=L(()=>y.value?"Hurry Up!":v.value?"You're Running Out of Time!":"Time Remainig: "),y=L(()=>_.value<=100-t.warningThreshold&&!v.value),v=L(()=>_.value<=100-t.criticalThreshold),l=L(()=>u.value<=0),P=L(()=>l.value?K.getColor("destructive"):v.value?K.getColor("destructive"):y.value?"oklch(0.769 0.188 70.08)":K.getColor("primary")),C=L(()=>l.value?"pi-exclamation-triangle":v.value?"pi-clock":"pi-hourglass");return(T,R)=>(o(),c("div",{class:k(["atb-timer",{"timer-warning":y.value,"timer-critical":v.value,"timer-expired":l.value}])},[e("div",We,[e("div",ze,[e("span",Fe,h(w.value),1),e("span",Ye,h(i.value)+"s",1)]),e("div",{class:k(["atb-timer-bar",{heartbeat:T.isActive&&!l.value}])},[R[1]||(R[1]=e("div",{class:"atb-timer-background"},null,-1)),e("div",{class:"atb-timer-fill",style:O({width:s.value+"%",backgroundColor:P.value,transition:"background-color 0.333s ease"})},[R[0]||(R[0]=e("div",{class:"atb-timer-glow"},null,-1)),e("div",Ue,[(o(),c(z,null,F(4,I=>e("div",{key:I,class:"segment-line",style:O({left:I*25+"%"})},null,4)),64))])],4),e("div",Oe,[e("i",{class:k(["pi",C.value])},null,2)]),v.value?(o(),c("div",Ge)):S("",!0)],2)]),y.value||v.value?(o(),c("div",Ve)):S("",!0),T.isActive&&!l.value&&!v.value?(o(),G(te,{key:1,count:8,types:["dot","star"],pattern:"stream",color:P.value,speed:1.5,"size-range":{min:2,max:5},glow:!0,density:6,"sync-with-timer":!0},null,8,["color"])):S("",!0),v.value&&!l.value?(o(),G(te,{key:2,count:15,types:["star","diamond","streak"],pattern:"burst",color:$(K).getColor("destructive"),speed:2,"size-range":{min:3,max:8},glow:!0,density:8,continuous:!0,"sync-with-timer":!0},null,8,["color"])):S("",!0),l.value?(o(),G(te,{key:3,count:20,types:["star","diamond"],pattern:"pulse",color:"oklch(0.969 0.188 70.08)",speed:3,"size-range":{min:4,max:10},glow:!0,density:10,"sync-with-timer":!0})):S("",!0)],2))}}),Xe=U(qe,[["__scopeId","data-v-4c609064"]]),je={class:"battle-arena"},Ze={class:"battle-background"},Qe={class:"atmospheric-effects"},Je={key:0,class:"turn-badge"},Ke={class:"turn-text"},xe={class:"turn-number"},et={key:1,class:"turn-badge"},tt={class:"turn-number"},st={class:"turn-timer-container"},at={class:"battle-field"},nt={class:"combatant-area player-area"},it={class:"atb-side-bars"},rt={class:"atb-side-bar left"},ot={class:"atb-segments"},lt={class:"character-card-content"},ut={class:"character-details"},ct={class:"character-header"},dt={class:"character-name"},mt={class:"character-level"},pt={class:"hp-container"},vt={class:"hp-bar"},ht={class:"hp-text"},yt={class:"combatant-area enemy-area"},gt={class:"atb-side-bars"},ft={class:"atb-side-bar right"},bt={class:"atb-segments"},$t={class:"character-card-content"},kt={class:"character-details"},Tt={class:"character-header"},_t={class:"character-name"},Mt={class:"character-level"},wt={class:"hp-container"},Pt={class:"hp-bar"},At={class:"hp-text"},St=Y({__name:"BattleArena",props:{playerName:{default:"You"},playerHealth:{},playerMaxHealth:{},playerLevel:{default:50},enemyName:{},enemyHealth:{},enemyMaxHealth:{},enemyLevel:{default:48},isPlayerTurn:{type:Boolean},isEnemyTurn:{type:Boolean},isWaiting:{type:Boolean},currentTurn:{default:1},timerRemaining:{default:5e3},timerDuration:{default:5e3},timerActive:{type:Boolean,default:!1},playerAtbProgress:{default:0},enemyAtbProgress:{default:0}},setup(f){const t=f,u=L(()=>Math.max(0,Math.min(100,t.playerHealth/t.playerMaxHealth*100))),d=L(()=>Math.max(0,Math.min(100,t.enemyHealth/t.enemyMaxHealth*100)));function n(r){return r>50?"hp-green":r>25?"hp-yellow":"hp-red"}const m=b(1);let _=t.isPlayerTurn;j(()=>t.isPlayerTurn,r=>{r&&!_&&m.value++,_=r});const s=L(()=>m.value),i=b(window.innerWidth<=768);window.addEventListener("resize",()=>{i.value=window.innerWidth<=768});const w=b(!1),y=b(!1),v=b(!1),l=b(!1),P=b([]),C=b([]);let T=0;const R=Math.random()*-2,I=Math.random()*-2;let E=t.playerHealth,W=t.enemyHealth;function B(r,g){const p={id:T++,value:r,isHeal:r>0};g?(P.value.push(p),setTimeout(()=>{P.value=P.value.filter(D=>D.id!==p.id)},1500)):(C.value.push(p),setTimeout(()=>{C.value=C.value.filter(D=>D.id!==p.id)},1500))}return j(()=>t.playerHealth,r=>{const g=r-E;g!==0&&(B(g,!0),r<E?(w.value=!0,setTimeout(()=>{w.value=!1},600)):r>E&&(v.value=!0,setTimeout(()=>{v.value=!1},600))),E=r}),j(()=>t.enemyHealth,r=>{const g=r-W;g!==0&&(B(g,!1),r<W?(y.value=!0,setTimeout(()=>{y.value=!1},600)):r>W&&(l.value=!0,setTimeout(()=>{l.value=!1},600))),W=r}),(r,g)=>(o(),c("div",je,[e("div",Ze,[g[0]||(g[0]=e("div",{class:"gradient-overlay"},null,-1)),e("div",Qe,[(o(),c(z,null,F(15,p=>e("div",{key:p,class:k(["particle",`particle-${p}`])},null,2)),64))])]),e("div",{class:k(["turn-indicator",{"player-turn":r.isPlayerTurn,"enemy-turn":r.isEnemyTurn}])},[r.isWaiting?(o(),c("div",et,[e("i",{class:k(["pi",""])}),g[1]||(g[1]=e("span",{class:"turn-text"}," Waiting... ",-1)),e("span",tt,"Turn "+h(s.value)+h(r.timerRemaining?` | ${r.timerRemaining}ms`:""),1)])):(o(),c("div",Je,[e("i",{class:k(["pi",r.isPlayerTurn?"pi-user":"pi-android"])},null,2),e("span",Ke,h(r.isPlayerTurn?"Your Turn":`${r.enemyName}'s Turn`),1),e("span",xe,"Turn "+h(s.value)+h(r.timerRemaining?` | ${r.timerRemaining}ms`:""),1)])),e("div",st,[M(Xe,{"time-remaining":r.timerRemaining,duration:r.timerDuration,"is-active":r.timerActive,size:i.value?"sm":"md"},null,8,["time-remaining","duration","is-active","size"])])],2),e("div",at,[e("div",nt,[M(re,{name:"damage-number"},{default:N(()=>[(o(!0),c(z,null,F(P.value,p=>(o(),c("div",{key:p.id,class:k(["damage-number",{"heal-number":p.isHeal}])},h(p.isHeal?"+":"-")+h(Math.abs(p.value)),3))),128))]),_:1}),M($(se),{class:k(["character-card player-card",{"taking-damage":w.value,healing:v.value,breathing:!0}]),style:O({"--health-percentage":u.value,"animation-delay":R+"s"})},{content:N(()=>[e("div",it,[e("div",rt,[e("div",ot,[(o(),c(z,null,F(10,p=>e("div",{key:p,class:k(["atb-segment",{active:11-p<=r.playerAtbProgress/10}])},null,2)),64))]),g[2]||(g[2]=e("span",{class:"atb-label"},"ATB",-1))])]),e("div",lt,[g[3]||(g[3]=e("div",{class:"character-icon"},[e("i",{class:"pi pi-user"})],-1)),e("div",ut,[e("div",ct,[e("span",dt,h(r.playerName),1),e("span",mt,"Lv"+h(r.playerLevel),1)]),e("div",pt,[e("div",vt,[e("div",{class:k(["hp-bar-fill",[n(u.value),{healing:v.value}]]),style:O({width:u.value+"%"})},null,6)]),e("div",ht,h(r.playerHealth)+"/"+h(r.playerMaxHealth)+" HP",1)])])])]),_:1},8,["class","style"])]),e("div",yt,[M(re,{name:"damage-number"},{default:N(()=>[(o(!0),c(z,null,F(C.value,p=>(o(),c("div",{key:p.id,class:k(["damage-number",{"heal-number":p.isHeal}])},h(p.isHeal?"+":"-")+h(Math.abs(p.value)),3))),128))]),_:1}),M($(se),{class:k(["character-card enemy-card",{"taking-damage":y.value,healing:l.value,breathing:!0}]),style:O({"--health-percentage":d.value,"animation-delay":I+"s"})},{content:N(()=>[e("div",gt,[e("div",ft,[e("div",bt,[(o(),c(z,null,F(10,p=>e("div",{key:p,class:k(["atb-segment",{active:11-p<=r.enemyAtbProgress/10}])},null,2)),64))]),g[4]||(g[4]=e("span",{class:"atb-label"},"ATB",-1))])]),e("div",$t,[g[5]||(g[5]=e("div",{class:"character-icon"},[e("i",{class:"pi pi-android"})],-1)),e("div",kt,[e("div",Tt,[e("span",_t,h(r.enemyName),1),e("span",Mt,"Lv"+h(r.enemyLevel),1)]),e("div",wt,[e("div",Pt,[e("div",{class:k(["hp-bar-fill",[n(d.value),{healing:l.value}]]),style:O({width:d.value+"%"})},null,6)]),e("div",At,h(r.enemyHealth)+"/"+h(r.enemyMaxHealth)+" HP",1)])])])]),_:1},8,["class","style"])])])]))}}),Rt=U(St,[["__scopeId","data-v-fc27f76e"]]),Lt={class:"game-actions"},Ct={key:0,class:"collapsed-content"},It={class:"collapsed-inner"},Bt={key:1,class:"expanded-content"},Ht={key:0,class:"action-prompt"},Nt={key:1,class:"action-prompt"},Et={key:2,class:"action-prompt"},Dt={key:3,class:"action-buttons"},Wt={class:"control-buttons"},zt=Y({__name:"GameActions",props:{playerName:{},enemyName:{},isPlayerTurn:{type:Boolean},isEnemyTurn:{type:Boolean},isWaiting:{type:Boolean},isProcessingAction:{type:Boolean}},emits:["attack","leave-match","open-settings","toggle-log"],setup(f){const t=b(!1),u=b(window.innerWidth<=576);window.addEventListener("resize",()=>{u.value=window.innerWidth<=576,u.value||(t.value=!1)});const d=()=>{t.value=!t.value};return(n,m)=>{const _=ce("tooltip");return o(),c("div",Lt,[e("div",{class:k(["action-panel",{expanded:t.value,collapsed:!t.value}])},[!t.value&&u.value&&n.isPlayerTurn&&!n.isProcessingAction?(o(),c("div",Ct,[e("div",It,[M($(H),{label:"Attack",icon:"pi pi-bolt",severity:"danger",class:"action-btn attack-btn",disabled:n.isProcessingAction,onClick:m[0]||(m[0]=s=>n.$emit("attack"))},null,8,["disabled"]),e("button",{class:"expand-indicator",onClick:d},m[6]||(m[6]=[e("i",{class:"pi pi-angle-double-up"},null,-1)]))])])):S("",!0),t.value&&u.value||!u.value||!n.isPlayerTurn||!n.isWaiting?(o(),c("div",Bt,[n.isPlayerTurn&&!n.isProcessingAction?(o(),c("div",Ht,"What will "+h(n.playerName)+" do?",1)):n.isEnemyTurn?(o(),c("div",Nt,h(n.enemyName)+" is thinking...",1)):n.isWaiting?(o(),c("div",Et,"Waiting...")):S("",!0),n.isPlayerTurn&&!n.isProcessingAction?(o(),c("div",Dt,[M($(H),{label:"Attack",icon:"pi pi-bolt",severity:"danger",class:"action-btn attack-btn",disabled:n.isProcessingAction,onClick:m[1]||(m[1]=s=>n.$emit("attack"))},null,8,["disabled"]),M($(H),{label:"Defend",icon:"pi pi-shield",severity:"info",class:"action-btn",disabled:n.isProcessingAction},null,8,["disabled"]),M($(H),{label:"Item",icon:"pi pi-box",severity:"success",class:"action-btn",disabled:n.isProcessingAction},null,8,["disabled"]),M($(H),{label:"Run",icon:"pi pi-directions",severity:"warning",class:"action-btn",disabled:n.isProcessingAction,onClick:m[2]||(m[2]=s=>n.$emit("leave-match"))},null,8,["disabled"])])):S("",!0),e("div",Wt,[x(M($(H),{icon:"pi pi-cog",class:"control-btn",severity:"secondary",text:"",rounded:"",onClick:m[3]||(m[3]=s=>n.$emit("open-settings"))},null,512),[[_,"Settings",void 0,{top:!0}]]),x(M($(H),{icon:"pi pi-book",class:"control-btn",severity:"secondary",text:"",rounded:"",onClick:m[4]||(m[4]=s=>n.$emit("toggle-log"))},null,512),[[_,"Combat Log",void 0,{top:!0}]]),x(M($(H),{icon:"pi pi-times",class:"control-btn",severity:"secondary",text:"",rounded:"",onClick:m[5]||(m[5]=s=>n.$emit("leave-match"))},null,512),[[_,"Leave Match",void 0,{top:!0}]])]),u.value&&n.isPlayerTurn?(o(),c("button",{key:4,class:"collapse-indicator",onClick:d},m[7]||(m[7]=[e("i",{class:"pi pi-angle-double-down"},null,-1)]))):S("",!0)])):S("",!0)],2)])}}}),Ft=U(zt,[["__scopeId","data-v-a6ac10be"]]),Yt={class:"game-interface"},Ut=Y({__name:"GameInterface",props:{matchTypeLabel:{},matchId:{},playerName:{},enemyName:{},gameState:{},isPlayerTurn:{type:Boolean},isEnemyTurn:{type:Boolean},isWaiting:{type:Boolean},isProcessingAction:{type:Boolean},gameLog:{},timerRemaining:{},timerDuration:{},timerActive:{type:Boolean},playerAtbProgress:{},enemyAtbProgress:{}},emits:["attack","leave-match","open-settings","toggle-log"],setup(f){return(t,u)=>(o(),c("div",Yt,[M(Rt,{"player-health":t.gameState.playerHealth,"player-max-health":t.gameState.playerMaxHealth,"enemy-health":t.gameState.enemyHealth,"enemy-max-health":t.gameState.enemyMaxHealth,"enemy-name":t.enemyName,"is-player-turn":t.isPlayerTurn,"is-enemy-turn":t.isEnemyTurn,"is-waiting":t.isWaiting,"timer-remaining":t.timerRemaining,"timer-duration":t.timerDuration,"timer-active":t.timerActive,"player-atb-progress":t.playerAtbProgress,"enemy-atb-progress":t.enemyAtbProgress},null,8,["player-health","player-max-health","enemy-health","enemy-max-health","enemy-name","is-player-turn","is-enemy-turn","is-waiting","timer-remaining","timer-duration","timer-active","player-atb-progress","enemy-atb-progress"]),M(Ft,{"player-name":t.playerName,"enemy-name":t.enemyName,"is-player-turn":t.isPlayerTurn,"is-enemy-turn":t.isEnemyTurn,"is-waiting":t.isWaiting,"is-processing-action":t.isProcessingAction,onAttack:u[0]||(u[0]=d=>t.$emit("attack")),onLeaveMatch:u[1]||(u[1]=d=>t.$emit("leave-match")),onOpenSettings:u[2]||(u[2]=d=>t.$emit("open-settings")),onToggleLog:u[3]||(u[3]=d=>t.$emit("toggle-log"))},null,8,["player-name","enemy-name","is-player-turn","is-enemy-turn","is-waiting","is-processing-action"])]))}}),Ot=U(Ut,[["__scopeId","data-v-10742bc3"]]),Gt={class:"match-lobby"},Vt={class:"flex gap large wrap match-card-wrapper"},qt={key:0,class:"wip-badge"},Xt={class:"card-header-container"},jt=["alt","src"],Zt={key:0,class:"loading-overlay"},Qt={class:"text-center flex"},Jt={class:"text-center flex"},Kt={class:"flex text-center"},xt=Y({__name:"MatchLobby",props:{matchCards:{},imageUrl:{}},emits:["matchTypeSelected"],setup(f,{emit:t}){const u=t;function d(n){u("matchTypeSelected",n)}return(n,m)=>{const _=ce("ripple");return o(),c("div",Gt,[e("div",Vt,[(o(!0),c(z,null,F(n.matchCards,s=>(o(),c("div",{key:s.type,class:"match-card-wrapper-outer"},[s.wip?(o(),c("span",qt,"WIP")):S("",!0),x((o(),G($(se),{class:k(["match-card",s.type,{disabled:s.disabled||s.loading,loading:s.loading}]),onClick:i=>!s.disabled&&!s.loading&&d(s)},{header:N(()=>[e("div",Xt,[e("img",{alt:`${s.type} header`,class:"card-image",src:`${n.imageUrl}match.webp`},null,8,jt),s.loading?(o(),c("div",Zt,[M($(de),{size:"large","stroke-width":"3"}),m[0]||(m[0]=e("p",null,"Starting match...",-1))])):S("",!0)])]),title:N(()=>[e("span",Qt,h(s.title),1)]),subtitle:N(()=>[e("span",Jt,h(s.subtitle),1)]),content:N(()=>[e("p",Kt,h(s.content),1)]),_:2},1032,["class","onClick"])),[[_]])]))),128))])])}}}),es=U(xt,[["__scopeId","data-v-9c28998f"]]),ts={class:"match-result-screen"},ss={class:"result-header"},as={class:"result-title"},ns={class:"result-subtitle"},is={class:"result-stats"},rs={class:"stat-row"},os={class:"stat-value"},ls={class:"stat-row"},us={class:"stat-value"},cs={class:"stat-row"},ds={class:"stat-value"},ms={class:"stat-row"},ps={class:"stat-value"},vs={class:"session-stats"},hs={class:"stats-grid"},ys={class:"stat-item"},gs={class:"stat-number"},fs={class:"stat-item"},bs={class:"stat-number"},$s={class:"stat-item"},ks={class:"stat-number"},Ts={class:"stat-item"},_s={class:"stat-number"},Ms={class:"result-actions"},ws=Y({__name:"MatchResult",props:{matchResult:{},sessionStats:{},isLoading:{type:Boolean}},emits:["rematch","returnToLobby"],setup(f){const t=f;function u(){var i;return((i=t.matchResult)==null?void 0:i.result)||"disconnect"}function d(){var i;switch((i=t.matchResult)==null?void 0:i.result){case"victory":return"pi pi-trophy";case"defeat":return"pi pi-times-circle";case"draw":return"pi pi-minus-circle";default:return"pi pi-info-circle"}}function n(){var i;switch((i=t.matchResult)==null?void 0:i.result){case"victory":return"Victory!";case"defeat":return"Defeat";case"draw":return"Draw";default:return"Match Complete"}}function m(){var i;switch((i=t.matchResult)==null?void 0:i.result){case"victory":return"You defeated the AI opponent!";case"defeat":return"The AI opponent proved too strong.";case"draw":return"Both fighters fell in battle.";default:return"The match has ended."}}function _(s){const i=Math.floor(s/60),w=s%60;return`${i}:${w.toString().padStart(2,"0")}`}return(s,i)=>{var w,y,v,l;return o(),c("div",ts,[e("div",{class:k(["result-container",u()])},[e("div",ss,[e("div",{class:k(["result-icon",u()])},[e("i",{class:k(d())},null,2)],2),e("h2",as,h(n()),1),e("p",ns,h(m()),1)]),e("div",is,[e("div",rs,[i[2]||(i[2]=e("span",{class:"stat-label"},"Match Duration:",-1)),e("span",os,h(_(((w=s.matchResult)==null?void 0:w.duration)||0)),1)]),e("div",ls,[i[3]||(i[3]=e("span",{class:"stat-label"},"Your Health:",-1)),e("span",us,h(((y=s.matchResult)==null?void 0:y.playerHealth)||0)+" HP",1)]),e("div",cs,[i[4]||(i[4]=e("span",{class:"stat-label"},"Enemy Health:",-1)),e("span",ds,h(((v=s.matchResult)==null?void 0:v.enemyHealth)||0)+" HP",1)]),e("div",ms,[i[5]||(i[5]=e("span",{class:"stat-label"},"Actions Performed:",-1)),e("span",ps,h(((l=s.matchResult)==null?void 0:l.actionsPerformed)||0),1)])]),e("div",vs,[i[10]||(i[10]=e("h3",null,"Session Statistics",-1)),e("div",hs,[e("div",ys,[e("span",gs,h(s.sessionStats.victories),1),i[6]||(i[6]=e("span",{class:"stat-text"},"Victories",-1))]),e("div",fs,[e("span",bs,h(s.sessionStats.defeats),1),i[7]||(i[7]=e("span",{class:"stat-text"},"Defeats",-1))]),e("div",$s,[e("span",ks,h(s.sessionStats.winRate)+"%",1),i[8]||(i[8]=e("span",{class:"stat-text"},"Win Rate",-1))]),e("div",Ts,[e("span",_s,h(s.sessionStats.totalMatches),1),i[9]||(i[9]=e("span",{class:"stat-text"},"Total Matches",-1))])])]),e("div",Ms,[M($(H),{loading:s.isLoading,onClick:i[0]||(i[0]=P=>s.$emit("rematch")),severity:"success",size:"large",class:"rematch-button"},{default:N(()=>i[11]||(i[11]=[e("i",{class:"pi pi-refresh"},null,-1),oe(" Rematch ")])),_:1},8,["loading"]),M($(H),{onClick:i[1]||(i[1]=P=>s.$emit("returnToLobby")),disabled:s.isLoading,size:"large",class:"lobby-button"},{default:N(()=>i[12]||(i[12]=[e("i",{class:"pi pi-home"},null,-1),oe(" Return to Lobby ")])),_:1},8,["disabled"])])],2)])}}}),Ps=U(ws,[["__scopeId","data-v-18bcc071"]]),As={class:"match"},Ss={class:"content"},Rs=Y({__name:"Match",setup(f){const t="/client_rune_dictionary/";document.documentElement.style.setProperty("--match-bg-url",`url(${t}match.webp)`);const u=Te(),d=_e(),{inLobby:n,inMatch:m,isFinished:_}=d,s=b(!1),i=b(!1),w=b(!0),y=b(!1),v=b([]),l=b(null),P=b(5e3),C=b(5e3),T=b(!1),R=b(0),I=b(0);Me("match",{onPlayerTurn:Z,onEnemyTurn:Q,onWaitingForTurn:V,onLogEntry:X,onTimerUpdate:q,onTimerExpired:me,onATBProgressUpdate:pe});const E=b([{type:"pve",title:"Player versus Environment",subtitle:"Challenge the environment",content:"Face off against AI-controlled opponents and test your strategies.",wip:!1,disabled:!1,loading:!1},{type:"pvp",title:"Player versus Player",subtitle:"Challenge other players to a duel",content:"Test your skills against other players in real-time combat using your runeabilities.",wip:!0,disabled:!0,loading:!1}]);async function W(a){a.type==="pve"?await B(a):await ve(a)}async function B(a){if(!a.loading)try{if(a.loading=!0,J("pvp","disabled",!0),m.value){u.toast.error("You are already in a match","center");return}l.value="pve",r(),await d.pve()}catch(A){console.error("PVE match error:",A),u.toast.error("Something went wrong","center")}finally{J("pvp","disabled",!0),a.loading=!1}}function r(){var a,A;s.value=!1,i.value=!1,y.value=!1,v.value=[],P.value=((a=d.store.timerInfo)==null?void 0:a.duration)||3e3,C.value=((A=d.store.timerInfo)==null?void 0:A.duration)||3e3,T.value=!1,R.value=0,I.value=0,X({type:"system",message:"Match started! Waiting for server to start first turn..."})}function g(){return l.value?l.value==="pve"?"Player vs AI":"Player vs Player":"Unknown Match"}function p(){return l.value?l.value==="pve"?"AI Opponent":"Enemy Player":"Enemy"}async function D(a){if(!(!s.value||y.value))try{y.value=!0,Pe.Next("match",{cta:"match.action",data:{type:"match.action",actionType:a,matchId:d.store.currentMatchId,channelId:d.store.currentChannelId}})}catch(A){console.error("Attack failed:",A),u.toast.error("Attack failed","center"),y.value=!1}}function Z(a){s.value=!0,i.value=!1,w.value=!1,y.value=!1,T.value=!0,R.value=100;const A=a!=null&&a.turnNumber?`Your turn! (Turn ${a.turnNumber})`:"Your turn!";X({type:"system",message:A})}function Q(a){s.value=!1,i.value=!0,w.value=!1,T.value=!0,I.value=100;const A=a!=null&&a.turnNumber?`${p()}'s turn... (Turn ${a.turnNumber})`:`${p()}'s turn...`;X({type:"system",message:A})}function V(){s.value=!1,i.value=!1,w.value=!0,y.value=!1,T.value=!1}function q(a){if(typeof a.remaining!="number"||typeof a.duration!="number"){console.warn("Invalid timer update data:",a);return}P.value=Math.max(0,a.remaining),C.value=a.duration,!T.value&&a.remaining>0&&(T.value=!0)}function me(a){T.value=!1,P.value=0;const A=a!=null&&a.turnNumber?`Turn ${a.turnNumber}`:"Current turn";X({type:"system",message:`${A}: Time's up! Automatic PASS action.`})}function pe(a){if(!a||typeof a!="object"){console.warn("Invalid ATB progress data:",a);return}a.player&&typeof a.player.readiness=="number"&&(R.value=Math.max(0,Math.min(100,a.player.readiness))),a.enemy&&typeof a.enemy.readiness=="number"&&(I.value=Math.max(0,Math.min(100,a.enemy.readiness)))}function X(a){v.value.unshift({type:a.type,message:a.message,timestamp:new Date}),v.value.length>50&&(v.value=v.value.slice(-50))}async function ve(a){a.loading=!0,J("pve","disabled",!0),a.disabled=!0,J("pve","disabled",!1)}function J(a,A,ne){const ie=E.value.find(be=>be.type===a);ie&&(ie[A]=ne)}function he(){return d.getMatchStats()}async function ye(){try{await d.startRematch()}catch(a){console.error("Failed to start rematch:",a)}}function ae(){d.returnToLobby()}function ge(){console.log("Open settings")}function fe(){console.log("Toggle combat log")}return le(()=>{we.IsNil(l.value)&&d.returnToLobby()}),(a,A)=>(o(),c("div",As,[e("div",{class:k(["viewport",{opaque:$(n),background:$(m)}])},[e("div",Ss,[$(n)?(o(),G(es,{key:0,"match-cards":E.value,"image-url":$(t),onMatchTypeSelected:W},null,8,["match-cards","image-url"])):S("",!0),$(_)?(o(),G(Ps,{key:1,"match-result":$(d).store.matchResult,"session-stats":he(),"is-loading":$(d).loading.api||$(d).loading.match,onRematch:ye,onReturnToLobby:ae},null,8,["match-result","session-stats","is-loading"])):S("",!0),$(m)?(o(),G(Ot,{key:2,"match-type-label":g(),"match-id":$(d).store.currentMatchId,"player-name":"You","enemy-name":p(),"game-state":$(d).store.gameState,"is-player-turn":s.value,"is-enemy-turn":i.value,"is-waiting":w.value,"is-processing-action":y.value,"game-log":v.value,"timer-remaining":P.value,"timer-duration":C.value,"timer-active":T.value,"player-atb-progress":R.value,"enemy-atb-progress":I.value,onLeaveMatch:ae,onAttack:A[0]||(A[0]=ne=>D("attack")),onOpenSettings:ge,onToggleLog:fe},null,8,["match-type-label","match-id","enemy-name","game-state","is-player-turn","is-enemy-turn","is-waiting","is-processing-action","game-log","timer-remaining","timer-duration","timer-active","player-atb-progress","enemy-atb-progress"])):S("",!0)])],2)]))}}),Is=U(Rs,[["__scopeId","data-v-05ec4ae7"]]);export{Is as default};
