import{d as j,B as q,C as ee,p as x,l as T,D as te,E as se,F as oe,G as K,c as P,f as w,x as C,a as s,n as E,t as Y,H as ne,q as e,s as l,I as A,J as H,w as h,K as U,L as ae,y as $,T as I,M as N,N as V,_ as L,O as R,o as u,Q as le,R as F,S as G,U as ie,A as B,V as ce,k as O,W as re,X as ue,z as de}from"./index.DZHwKcYk.js";import"./IsNumberOrRangeConstraint.B_UE5vHo.js";import{u as Q,a as J,S as ge}from"./Scene.BqB4KCzZ.js";import{A as fe}from"./auth.api.CErS-Rg5.js";const pe={class:"flex items-center gap-2"},he={class:"flex items-center gap-1"},me={key:0,class:"text-center text-sm text-muted-foreground py-8"},we=["onClick"],ve={class:"flex items-start justify-between gap-2 mb-1"},be={class:"flex items-center gap-1 flex-1 min-w-0"},xe={class:"text-muted-foreground text-[10px] whitespace-nowrap"},ye={class:"px-4 py-2 border-t border-border bg-background/50 flex items-center justify-between text-xs text-muted-foreground"},ke={class:"text-[10px]"},_e=j({__name:"DebugConsole",setup(t){const i=q(),d=ee(),p=x(null),n=x(null),g=x(null),v=x(!1),m=x({x:0,y:0,width:0,height:0}),f=x([]),S=x(null),_=x(new Set),y=T({get:()=>({width:d.debugConsole.width,height:d.debugConsole.height}),set:o=>d.updateDebugConsole({width:o.width,height:o.height})});Q("debug",{log(o){f.value.push(o)}});const{x:M,y:c}=te(p,{initialValue:{x:d.debugConsole.x,y:d.debugConsole.y},handle:n});function r(o){return{"text-green-500":o.type.includes("connect"),"text-red-500":o.type.includes("error")||o.type.includes("disconnect"),"text-blue-500":o.type.includes("match"),"text-yellow-500":o.type.includes("system"),"text-purple-500":o.type.includes("whisper"),"text-gray-500":o.type.includes("pong")}}function k(){f.value=[],_.value.clear()}function a(o){_.value.has(o)?_.value.delete(o):_.value.add(o)}function W(){const o={x:window.innerWidth-400-16,y:64,width:400,height:Math.min(window.innerHeight*.6,600)};d.updateDebugConsole(o),M.value=o.x,c.value=o.y}function Z(o){if(typeof o=="string")return o;if(typeof o=="object")try{return JSON.stringify(o,null,2)}catch{return String(o)}return String(o)}return se([M,c],([o,b])=>{const D=Math.round(o),z=Math.round(b);M.value=D,c.value=z,d.updateDebugConsole({x:D,y:z})},{debounce:300}),oe(g,{onSwipeStart:o=>{v.value=!0,m.value={x:o.x,y:o.y,width:y.value.width,height:y.value.height}},onSwipe:o=>{if(!v.value)return;const b=o.x-m.value.x,D=o.y-m.value.y,z=Math.max(300,m.value.width+b),X=Math.max(200,m.value.height+D);y.value={width:z,height:X}},onSwipeEnd:()=>{y.value={width:Math.round(y.value.width),height:Math.round(y.value.height)},v.value=!1}}),K(()=>f.value.length,async()=>{await le(),S.value&&(S.value.scrollTop=S.value.scrollHeight)}),(o,b)=>(u(),P(I,{to:"body"},[s(i).debug.showWebSocketDebugger?(u(),w("div",{key:0,ref_key:"draggableContainer",ref:p,style:ne({left:`${s(M)}px`,top:`${s(c)}px`,width:`${y.value.width}px`,height:`${y.value.height}px`}),onScroll:b[2]||(b[2]=Y(()=>{},["prevent","stop"])),class:E(["fixed bg-background/90 backdrop-blur-sm border rounded-lg shadow-lg overflow-hidden flex flex-col z-40 transition-shadow",v.value?"border-primary shadow-xl":"border-border"])},[e("div",{ref_key:"handle",ref:n,class:"flex items-center justify-between px-4 py-2 border-b border-border bg-background/50 cursor-move select-none"},[e("div",pe,[l(s(A),{icon:"radix-icons:globe",class:"h-4 w-4 text-primary"}),b[3]||(b[3]=e("h3",{class:"text-sm font-semibold"},"Console",-1))]),e("div",he,[l(s(H),{"delay-duration":0},{default:h(()=>[l(s(N),null,{default:h(()=>[l(s(V),{"as-child":""},{default:h(()=>[l(L,{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:k},{default:h(()=>[l(s(A),{icon:"radix-icons:trash",class:"h-3 w-3"})]),_:1})]),_:1}),l(s(R),null,{default:h(()=>[...b[4]||(b[4]=[e("p",null,"Clear Events",-1)])]),_:1})]),_:1})]),_:1}),l(s(H),{"delay-duration":0},{default:h(()=>[l(s(N),null,{default:h(()=>[l(s(V),{"as-child":""},{default:h(()=>[l(L,{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:W},{default:h(()=>[l(s(A),{icon:"radix-icons:reset",class:"h-3 w-3"})]),_:1})]),_:1}),l(s(R),null,{default:h(()=>[...b[5]||(b[5]=[e("p",null,"Reset Position & Size",-1)])]),_:1})]),_:1})]),_:1}),l(s(H),{"delay-duration":0},{default:h(()=>[l(s(N),null,{default:h(()=>[l(s(V),{"as-child":""},{default:h(()=>[l(L,{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:b[0]||(b[0]=D=>s(i).debug.showWebSocketDebugger=!1)},{default:h(()=>[l(s(A),{icon:"radix-icons:cross-2",class:"h-3 w-3"})]),_:1})]),_:1}),l(s(R),null,{default:h(()=>[...b[6]||(b[6]=[e("p",null,"Close",-1)])]),_:1})]),_:1})]),_:1})])],512),e("div",{ref_key:"eventListRef",ref:S,class:"flex-1 overflow-y-auto p-2 space-y-1",onWheel:b[1]||(b[1]=Y(()=>{},["stop"]))},[f.value.length===0?(u(),w("div",me," No events yet. Waiting for WebSocket activity... ")):C("",!0),(u(!0),w(U,null,ae(f.value,(D,z)=>(u(),w("div",{key:z,class:"text-xs font-mono p-2 rounded bg-muted/50 hover:bg-muted transition-colors cursor-pointer",onClick:X=>a(z)},[e("div",ve,[e("div",be,[l(s(A),{icon:_.value.has(z)?"radix-icons:chevron-down":"radix-icons:chevron-right",class:"h-3 w-3 flex-shrink-0"},null,8,["icon"]),e("span",{class:E(["font-semibold truncate",r(D)])},$(D.type),3)]),e("span",xe,$(D.timestamp),1)]),e("div",{class:E(["text-muted-foreground break-all",_.value.has(z)?"":"line-clamp-2"])},$(Z(D.data)),3)],8,we))),128))],544),e("div",ye,[e("span",null,$(f.value.length)+" events",1),e("span",ke,$(y.value.width)+"x"+$(y.value.height),1)]),e("div",{ref_key:"resizeHandle",ref:g,class:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize opacity-50 hover:opacity-100 transition-opacity"},[l(s(A),{icon:"radix-icons:corner-bottom-right",class:"w-4 h-4 text-muted-foreground"})],512)],38)):C("",!0)]))}}),Ce={key:0,class:"fixed inset-0 z-[70] bg-background flex items-center justify-center"},Se={class:"text-center space-y-4"},$e={class:"space-y-2"},Me={class:"text-xl font-semibold text-foreground"},We={key:0,class:"text-sm text-muted-foreground"},De=j({__name:"AppLoadingScreen",props:{visible:{type:Boolean,default:!1},message:{default:"Loading..."},subMessage:{default:void 0}},setup(t){return(i,d)=>(u(),P(I,{to:"body"},[l(F,{name:"fade"},{default:h(()=>[t.visible?(u(),w("div",Ce,[e("div",Se,[d[0]||(d[0]=e("div",{class:"relative mx-auto w-16 h-16"},[e("svg",{class:"animate-spin h-16 w-16 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1)),e("div",$e,[e("h2",Me,$(t.message),1),t.subMessage?(u(),w("p",We,$(t.subMessage),1)):C("",!0)])])])):C("",!0)]),_:1})]))}}),ze=G(De,[["__scopeId","data-v-cd938281"]]),Be=async()=>new Promise(t=>{const i=window.open("about:blank","_blank","width=100,height=100");!i||i.closed||typeof i.closed>"u"?t({blocked:!0,message:"Popup blocker detected. Please allow popups for this site."}):(i.close(),t({blocked:!1,message:"No popup blocker detected."}))}),Pe=async(t,i,d=5e3)=>new Promise(p=>{try{const n=i?new WebSocket(t,i):new WebSocket(t),g=setTimeout(()=>{n.readyState!==WebSocket.OPEN&&(n.close(),p({success:!1,message:"WebSocket connection timed out. This might be caused by a browser extension or firewall blocking the connection."}))},d);n.onopen=()=>{clearTimeout(g),n.close(),p({success:!0,message:"WebSocket connection successful."})},n.onerror=()=>{clearTimeout(g),n.close(),p({success:!1,message:"WebSocket connection failed. This might be caused by a browser extension or firewall blocking the connection."})}}catch(n){p({success:!1,message:`WebSocket connection error: ${n instanceof Error?n.message:String(n)}`})}});function Te(){const t=x(!1),i=x({webSocket:{success:!1,message:""}});return{loading:t,results:i,runDiagnostics:async n=>{t.value=!0;const g=n?.wsUrl||"wss://topsyde-gaming.duckdns.org:3000",m=n?.testPopups??!1?await Be():void 0,f=await Pe(g,n?.protocol);return i.value={...m&&{popupBlocker:m},webSocket:f},t.value=!1,i.value},hasIssues:()=>{const n=!i.value.webSocket.success,g=i.value.popupBlocker?.blocked===!0;return n||g}}}const Ae={key:0,class:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4"},Le={class:"w-full max-w-2xl animate-in zoom-in-95 duration-200"},je={class:"rounded-lg border border-border bg-card p-6 shadow-2xl space-y-4"},Ee={key:0,class:"space-y-3"},Ie={class:"flex-shrink-0 mt-0.5"},He={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor"},Ne={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-destructive",viewBox:"0 0 20 20",fill:"currentColor"},Ve={class:"flex-1"},Re={class:"text-sm text-muted-foreground mt-1"},Ue={key:0,class:"rounded-md bg-yellow-500/10 border border-yellow-500/50 p-4"},Fe={key:1,class:"flex items-center justify-center gap-2 p-3 rounded-md bg-muted/50 text-sm text-muted-foreground"},Ge={key:1,class:"text-center py-8"},Oe={class:"flex gap-2 justify-center pt-2"},Je=j({__name:"ConnectionDiagnosticModal",props:{wsUrl:{default:void 0},protocol:{default:void 0}},emits:["connectionSuccess","connectionFailed"],setup(t,{emit:i}){const d=t,p=i,n=Te(),g=x(!1),v=x(!1),m=x(10);let f=null;const S=n.loading,_=n.results;async function y(){v.value=!1,m.value=10,(await n.runDiagnostics({wsUrl:d.wsUrl,protocol:d.protocol})).webSocket.success?(console.log("[ConnectionDiagnostic] Connection successful, emitting success"),p("connectionSuccess"),g.value=!1):(console.log("[ConnectionDiagnostic] Connection failed, showing diagnostic modal"),p("connectionFailed"),g.value=!0,M())}function M(){f&&clearInterval(f),f=setInterval(()=>{m.value--,m.value<=0&&(f&&clearInterval(f),v.value=!0)},1e3)}function c(){console.log("[ConnectionDiagnostic] Retrying connection..."),g.value=!1,y()}function r(){f&&clearInterval(f),g.value=!1}return ie(()=>{console.log("[ConnectionDiagnostic] Component mounted, running diagnostics..."),y()}),(k,a)=>(u(),P(I,{to:"body"},[l(F,{name:"fade"},{default:h(()=>[g.value?(u(),w("div",Ae,[e("div",Le,[e("div",je,[a[8]||(a[8]=e("div",{class:"text-center space-y-2"},[e("div",{class:"mx-auto w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-destructive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("h2",{class:"text-2xl font-bold tracking-tight text-foreground"},"Connection Blocked"),e("p",{class:"text-sm text-muted-foreground"}," Unable to connect to the game server. Please check your browser settings. ")],-1)),s(S)?(u(),w("div",Ge,[...a[5]||(a[5]=[e("svg",{class:"animate-spin h-8 w-8 mx-auto text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-sm text-muted-foreground mt-3"},"Running diagnostics...",-1)])])):(u(),w("div",Ee,[e("div",{class:E(["flex items-start gap-3 p-3 rounded-md border",s(_).webSocket.success?"border-green-500/50 bg-green-500/10":"border-destructive/50 bg-destructive/10"])},[e("div",Ie,[s(_).webSocket.success?(u(),w("svg",He,[...a[0]||(a[0]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):(u(),w("svg",Ne,[...a[1]||(a[1]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])]))]),e("div",Ve,[a[2]||(a[2]=e("strong",{class:"text-sm font-semibold"},"WebSocket Connection:",-1)),e("p",Re,$(s(_).webSocket.message),1)])],2),s(_).webSocket.success?C("",!0):(u(),w("div",Ue,[...a[3]||(a[3]=[e("h4",{class:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),B(" Troubleshooting Tips ")],-1),e("ul",{class:"text-sm text-muted-foreground space-y-1.5 ml-6 list-disc"},[e("li",null,[e("strong",null,"Browser Extensions:"),B(" Disable ad blockers and privacy extensions "),e("ul",{class:"ml-4 mt-1 list-circle space-y-1"},[e("li",null,"uBlock Origin, AdBlock Plus, AdGuard"),e("li",null,"Privacy Badger, Ghostery, DuckDuckGo Privacy Essentials"),e("li",null,"NoScript, HTTPS Everywhere")])]),e("li",null,[e("strong",null,"Popup Blockers:"),B(" Allow popups for this site in browser settings ")]),e("li",null,[e("strong",null,"Firewall:"),B(" Check if your firewall is blocking WebSocket connections ")]),e("li",null,[e("strong",null,"VPN/Proxy:"),B(" Try disabling VPN or proxy if active")]),e("li",null,[e("strong",null,"Try:"),B(" Use incognito mode or a different browser (Chrome, Firefox, Edge) ")])],-1)])])),v.value?C("",!0):(u(),w("div",Fe,[a[4]||(a[4]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),e("span",null,"You can retry in "+$(m.value)+" seconds",1)]))])),e("div",Oe,[l(s(L),{onClick:c,disabled:!v.value||s(S),variant:"default"},{default:h(()=>[...a[6]||(a[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),B(" Retry Connection ",-1)])]),_:1},8,["disabled"]),v.value?(u(),P(s(L),{key:0,onClick:r,variant:"outline"},{default:h(()=>[...a[7]||(a[7]=[B(" Close ",-1)])]),_:1})):C("",!0)])])])])):C("",!0)]),_:1})]))}}),Xe=G(Je,[["__scopeId","data-v-95637a00"]]),Ye=()=>{const t=J(),i=q(),d=ce(),p=O(),n=Q(["debug","ws"]);async function g(){if(t.isConnecting||t.isConnected){console.warn("[WS] Already connected or connecting");return}const c={username:p.username||"",password:p.password||"",api_key:"r_d_25c9dd62-ba12-44de-b303-67ef659ba7bd"};try{t.status="handshaking";const r=await _(c);if(!r.scene)throw new Error("No scene provided by server");console.log("[WS] Handshake successful:",r);const k={id:r.id,name:r.name},a=r.scene;t.setClientData(k),d.setActiveScene(a),v(k)}catch(r){throw t.status="disconnected",t.lastError=r,console.error("[WS] Connection failed:",r),r}}function v(c){const r=`${c.id}-${c.name}`;t.connect(r)}function m(){t.register("useWebsocketConnection",{data:y})}function f(){t.disconnect(),t.$reset()}function S(c){const r=t.getWebSocketInstance();if(!r||!t.isConnected)throw new Error("WebSocket not connected");const k=typeof c=="string"?c:JSON.stringify(c);r.send(k)}async function _(c){const k=await new fe("api","https://topsyde-gaming.duckdns.org:3000").handshake(c.username,c.password,c.api_key);return{id:k.data.id,name:k.data.name,scene:k.data.scene}}function y(c,r){try{if(r.type=="message"){console.log("[WS] Chat message received:",r);return}M({...r,data:r.content})}catch(k){console.error("[WS] Failed to parse message:",k)}}function M(c){i.debug.showWebSocketDebugger&&(n.$next("debug",{cta:"log",data:{...c,timestamp:new Date().toLocaleTimeString()}}),c.type=="scene"&&n.$next("scene",{cta:c.type,data:c}))}return{connect:g,register:m,disconnect:f,send:S,status:T(()=>t.status),isConnected:T(()=>t.isConnected),isConnecting:T(()=>t.isConnecting),clientData:T(()=>t.clientData)}},qe={key:0,class:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4"},Ke={class:"w-full max-w-md space-y-6 animate-in zoom-in-95 duration-200"},Qe={class:"rounded-lg border border-border bg-card p-6 shadow-2xl space-y-4"},Ze={class:"text-center space-y-2"},et={class:"text-sm text-muted-foreground"},tt={key:0,class:"rounded-md bg-destructive/10 p-3 text-sm text-destructive"},st={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ot=j({__name:"WebSocketManager",props:{autoConnect:{type:Boolean,default:!0},autoDisconnect:{type:Boolean}},setup(t){const i=t,d=O(),p=J(),n=Ye(),g=x(!1),v=x(""),m=x(!1),f=x(!1),S=x(!1),_=T(()=>"wss://topsyde-gaming.duckdns.org:3000"),y=T(()=>p.clientData?`${p.clientData.id}-${p.clientData.name}`:void 0);async function M(){console.log("[WebSocketManager] Diagnostic passed, preparing connection..."),f.value=!0,S.value=!0,await new Promise(a=>setTimeout(a,800)),S.value=!1,m.value=!0}function c(){console.log("[WebSocketManager] Diagnostic failed, user will see troubleshooting"),f.value=!1,m.value=!1,S.value=!1}async function r(){if(!d.isAuthenticated){console.warn("[WebSocketManager] Cannot connect: Not authenticated");return}g.value=!0,v.value="";try{console.log("[WebSocketManager] Connecting to WebSocket..."),await n.connect(),n.register(),console.log("✅ [WebSocketManager] Connected successfully!"),m.value=!1}catch(a){console.error("❌ [WebSocketManager] Connection failed:",a),v.value=a?.message||"Failed to connect. Please try again."}finally{g.value=!1}}function k(){n.disconnect()}return re(()=>{i.autoConnect&&r()}),ue(k),(a,W)=>(u(),w(U,null,[s(d).isAuthenticated&&!s(p).isConnected&&!f.value?(u(),P(Xe,{key:0,"ws-url":_.value,protocol:y.value,onConnectionSuccess:M,onConnectionFailed:c},null,8,["ws-url","protocol"])):C("",!0),l(ze,{visible:S.value,message:"Preparing Connection","sub-message":"Setting up secure WebSocket connection..."},null,8,["visible"]),(u(),P(I,{to:"body"},[l(F,{name:"fade"},{default:h(()=>[m.value?(u(),w("div",qe,[e("div",Ke,[e("div",Qe,[e("div",Ze,[W[0]||(W[0]=e("div",{class:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),W[1]||(W[1]=e("h2",{class:"text-2xl font-bold tracking-tight text-foreground"},"Connect to Game",-1)),e("p",et," Welcome, "+$(s(d).username)+"! Click below to connect to the game server. ",1)]),v.value?(u(),w("div",tt,$(v.value),1)):C("",!0),l(s(L),{onClick:r,class:"w-full h-11",disabled:g.value},{default:h(()=>[g.value?(u(),w("svg",st,[...W[2]||(W[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):C("",!0),B(" "+$(g.value?"Connecting...":"Connect to Server"),1)]),_:1},8,["disabled"]),W[3]||(W[3]=e("p",{class:"text-center text-xs text-muted-foreground"},"Secured with SSL/TLS encryption",-1))])])])):C("",!0)]),_:1})]))],64))}}),nt=G(ot,[["__scopeId","data-v-646e0d71"]]),at={class:"game"},ut=j({__name:"Game",setup(t){const i=O(),d=J(),p=de();return K(()=>i.isAuthenticated,n=>{n||(console.log("User logged out, disconnecting WebSocket"),d.disconnect(),p.push("/login"))},{immediate:!0}),(n,g)=>(u(),w("div",at,[s(i).isAuthenticated?(u(),w(U,{key:0},[l(_e),s(i).isAuthenticated?(u(),P(nt,{key:0,"auto-connect":!1})):C("",!0)],64)):C("",!0),s(d).isConnected?(u(),P(ge,{key:1})):C("",!0)]))}});export{ut as default};
