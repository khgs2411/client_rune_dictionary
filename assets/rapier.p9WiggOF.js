import{V as n,R as u,b as z,c as $e,d as Qe,e as b,f as N,g as y,h as et,i as tt,j as it,k as rt,l as st,m as ie,n as W,P as G,C as Z,o as at,p as nt,q as ot,r as lt,s as ht,t as ct,v as wt,w as dt,x as ut,y as re,z as se,A as ae,B as O,D as ne,E as oe,F as le,G as he,T as ce,H as we,I as de,J as ue,K as pe,L as me,M as fe,N as Se,O as ge,Q as Re,U as be,W as Ce,X as V,Y as j,Z as pt,_ as mt,$ as ft,a0 as St,a1 as gt,a2 as Rt,a3 as bt,a4 as Ct,a5 as Pt,a6 as _t,a7 as vt,a8 as It}from"./Scene.DV_aWMcS.js";import"./IsNumberOrRangeConstraint.Cuef3wTz.js";import"./index.CHYj-YOL.js";var R;(function(s){s[s.Dynamic=0]="Dynamic",s[s.Fixed=1]="Fixed",s[s.KinematicPositionBased=2]="KinematicPositionBased",s[s.KinematicVelocityBased=3]="KinematicVelocityBased"})(R||(R={}));class X{constructor(e,t,i){this.rawSet=e,this.colliderSet=t,this.handle=i}finalizeDeserialization(e){this.colliderSet=e}isValid(){return this.rawSet.contains(this.handle)}lockTranslations(e,t){return this.rawSet.rbLockTranslations(this.handle,e,t)}lockRotations(e,t){return this.rawSet.rbLockRotations(this.handle,e,t)}setEnabledTranslations(e,t,i,r){return this.rawSet.rbSetEnabledTranslations(this.handle,e,t,i,r)}restrictTranslations(e,t,i,r){this.setEnabledTranslations(e,t,i,r)}setEnabledRotations(e,t,i,r){return this.rawSet.rbSetEnabledRotations(this.handle,e,t,i,r)}restrictRotations(e,t,i,r){this.setEnabledRotations(e,t,i,r)}dominanceGroup(){return this.rawSet.rbDominanceGroup(this.handle)}setDominanceGroup(e){this.rawSet.rbSetDominanceGroup(this.handle,e)}additionalSolverIterations(){return this.rawSet.rbAdditionalSolverIterations(this.handle)}setAdditionalSolverIterations(e){this.rawSet.rbSetAdditionalSolverIterations(this.handle,e)}enableCcd(e){this.rawSet.rbEnableCcd(this.handle,e)}setSoftCcdPrediction(e){this.rawSet.rbSetSoftCcdPrediction(this.handle,e)}softCcdPrediction(){return this.rawSet.rbSoftCcdPrediction(this.handle)}translation(){let e=this.rawSet.rbTranslation(this.handle);return n.fromRaw(e)}rotation(){let e=this.rawSet.rbRotation(this.handle);return u.fromRaw(e)}nextTranslation(){let e=this.rawSet.rbNextTranslation(this.handle);return n.fromRaw(e)}nextRotation(){let e=this.rawSet.rbNextRotation(this.handle);return u.fromRaw(e)}setTranslation(e,t){this.rawSet.rbSetTranslation(this.handle,e.x,e.y,e.z,t)}setLinvel(e,t){let i=n.intoRaw(e);this.rawSet.rbSetLinvel(this.handle,i,t),i.free()}gravityScale(){return this.rawSet.rbGravityScale(this.handle)}setGravityScale(e,t){this.rawSet.rbSetGravityScale(this.handle,e,t)}setRotation(e,t){this.rawSet.rbSetRotation(this.handle,e.x,e.y,e.z,e.w,t)}setAngvel(e,t){let i=n.intoRaw(e);this.rawSet.rbSetAngvel(this.handle,i,t),i.free()}setNextKinematicTranslation(e){this.rawSet.rbSetNextKinematicTranslation(this.handle,e.x,e.y,e.z)}setNextKinematicRotation(e){this.rawSet.rbSetNextKinematicRotation(this.handle,e.x,e.y,e.z,e.w)}linvel(){return n.fromRaw(this.rawSet.rbLinvel(this.handle))}velocityAtPoint(e){const t=n.intoRaw(e);let i=n.fromRaw(this.rawSet.rbVelocityAtPoint(this.handle,t));return t.free(),i}angvel(){return n.fromRaw(this.rawSet.rbAngvel(this.handle))}mass(){return this.rawSet.rbMass(this.handle)}effectiveInvMass(){return n.fromRaw(this.rawSet.rbEffectiveInvMass(this.handle))}invMass(){return this.rawSet.rbInvMass(this.handle)}localCom(){return n.fromRaw(this.rawSet.rbLocalCom(this.handle))}worldCom(){return n.fromRaw(this.rawSet.rbWorldCom(this.handle))}invPrincipalInertia(){return n.fromRaw(this.rawSet.rbInvPrincipalInertia(this.handle))}principalInertia(){return n.fromRaw(this.rawSet.rbPrincipalInertia(this.handle))}principalInertiaLocalFrame(){return u.fromRaw(this.rawSet.rbPrincipalInertiaLocalFrame(this.handle))}effectiveWorldInvInertia(){return z.fromRaw(this.rawSet.rbEffectiveWorldInvInertia(this.handle))}effectiveAngularInertia(){return z.fromRaw(this.rawSet.rbEffectiveAngularInertia(this.handle))}sleep(){this.rawSet.rbSleep(this.handle)}wakeUp(){this.rawSet.rbWakeUp(this.handle)}isCcdEnabled(){return this.rawSet.rbIsCcdEnabled(this.handle)}numColliders(){return this.rawSet.rbNumColliders(this.handle)}collider(e){return this.colliderSet.get(this.rawSet.rbCollider(this.handle,e))}setEnabled(e){this.rawSet.rbSetEnabled(this.handle,e)}isEnabled(){return this.rawSet.rbIsEnabled(this.handle)}bodyType(){return this.rawSet.rbBodyType(this.handle)}setBodyType(e,t){return this.rawSet.rbSetBodyType(this.handle,e,t)}isSleeping(){return this.rawSet.rbIsSleeping(this.handle)}isMoving(){return this.rawSet.rbIsMoving(this.handle)}isFixed(){return this.rawSet.rbIsFixed(this.handle)}isKinematic(){return this.rawSet.rbIsKinematic(this.handle)}isDynamic(){return this.rawSet.rbIsDynamic(this.handle)}linearDamping(){return this.rawSet.rbLinearDamping(this.handle)}angularDamping(){return this.rawSet.rbAngularDamping(this.handle)}setLinearDamping(e){this.rawSet.rbSetLinearDamping(this.handle,e)}recomputeMassPropertiesFromColliders(){this.rawSet.rbRecomputeMassPropertiesFromColliders(this.handle,this.colliderSet.raw)}setAdditionalMass(e,t){this.rawSet.rbSetAdditionalMass(this.handle,e,t)}setAdditionalMassProperties(e,t,i,r,a){let o=n.intoRaw(t),l=n.intoRaw(i),h=u.intoRaw(r);this.rawSet.rbSetAdditionalMassProperties(this.handle,e,o,l,h,a),o.free(),l.free(),h.free()}setAngularDamping(e){this.rawSet.rbSetAngularDamping(this.handle,e)}resetForces(e){this.rawSet.rbResetForces(this.handle,e)}resetTorques(e){this.rawSet.rbResetTorques(this.handle,e)}addForce(e,t){const i=n.intoRaw(e);this.rawSet.rbAddForce(this.handle,i,t),i.free()}applyImpulse(e,t){const i=n.intoRaw(e);this.rawSet.rbApplyImpulse(this.handle,i,t),i.free()}addTorque(e,t){const i=n.intoRaw(e);this.rawSet.rbAddTorque(this.handle,i,t),i.free()}applyTorqueImpulse(e,t){const i=n.intoRaw(e);this.rawSet.rbApplyTorqueImpulse(this.handle,i,t),i.free()}addForceAtPoint(e,t,i){const r=n.intoRaw(e),a=n.intoRaw(t);this.rawSet.rbAddForceAtPoint(this.handle,r,a,i),r.free(),a.free()}applyImpulseAtPoint(e,t,i){const r=n.intoRaw(e),a=n.intoRaw(t);this.rawSet.rbApplyImpulseAtPoint(this.handle,r,a,i),r.free(),a.free()}userForce(){return n.fromRaw(this.rawSet.rbUserForce(this.handle))}userTorque(){return n.fromRaw(this.rawSet.rbUserTorque(this.handle))}}class P{constructor(e){this.enabled=!0,this.status=e,this.translation=n.zeros(),this.rotation=u.identity(),this.gravityScale=1,this.linvel=n.zeros(),this.mass=0,this.massOnly=!1,this.centerOfMass=n.zeros(),this.translationsEnabledX=!0,this.translationsEnabledY=!0,this.angvel=n.zeros(),this.principalAngularInertia=n.zeros(),this.angularInertiaLocalFrame=u.identity(),this.translationsEnabledZ=!0,this.rotationsEnabledX=!0,this.rotationsEnabledY=!0,this.rotationsEnabledZ=!0,this.linearDamping=0,this.angularDamping=0,this.canSleep=!0,this.sleeping=!1,this.ccdEnabled=!1,this.softCcdPrediction=0,this.dominanceGroup=0,this.additionalSolverIterations=0}static dynamic(){return new P(R.Dynamic)}static kinematicPositionBased(){return new P(R.KinematicPositionBased)}static kinematicVelocityBased(){return new P(R.KinematicVelocityBased)}static fixed(){return new P(R.Fixed)}static newDynamic(){return new P(R.Dynamic)}static newKinematicPositionBased(){return new P(R.KinematicPositionBased)}static newKinematicVelocityBased(){return new P(R.KinematicVelocityBased)}static newStatic(){return new P(R.Fixed)}setDominanceGroup(e){return this.dominanceGroup=e,this}setAdditionalSolverIterations(e){return this.additionalSolverIterations=e,this}setEnabled(e){return this.enabled=e,this}setTranslation(e,t,i){if(typeof e!="number"||typeof t!="number"||typeof i!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:e,y:t,z:i},this}setRotation(e){return u.copy(this.rotation,e),this}setGravityScale(e){return this.gravityScale=e,this}setAdditionalMass(e){return this.mass=e,this.massOnly=!0,this}setLinvel(e,t,i){if(typeof e!="number"||typeof t!="number"||typeof i!="number")throw TypeError("The linvel components must be numbers.");return this.linvel={x:e,y:t,z:i},this}setAngvel(e){return n.copy(this.angvel,e),this}setAdditionalMassProperties(e,t,i,r){return this.mass=e,n.copy(this.centerOfMass,t),n.copy(this.principalAngularInertia,i),u.copy(this.angularInertiaLocalFrame,r),this.massOnly=!1,this}enabledTranslations(e,t,i){return this.translationsEnabledX=e,this.translationsEnabledY=t,this.translationsEnabledZ=i,this}restrictTranslations(e,t,i){return this.enabledTranslations(e,t,i)}lockTranslations(){return this.enabledTranslations(!1,!1,!1)}enabledRotations(e,t,i){return this.rotationsEnabledX=e,this.rotationsEnabledY=t,this.rotationsEnabledZ=i,this}restrictRotations(e,t,i){return this.enabledRotations(e,t,i)}lockRotations(){return this.restrictRotations(!1,!1,!1)}setLinearDamping(e){return this.linearDamping=e,this}setAngularDamping(e){return this.angularDamping=e,this}setCanSleep(e){return this.canSleep=e,this}setSleeping(e){return this.sleeping=e,this}setCcdEnabled(e){return this.ccdEnabled=e,this}setSoftCcdPrediction(e){return this.softCcdPrediction=e,this}setUserData(e){return this.userData=e,this}}class F{constructor(){this.fconv=new Float64Array(1),this.uconv=new Uint32Array(this.fconv.buffer),this.data=new Array,this.size=0}set(e,t){let i=this.index(e);for(;this.data.length<=i;)this.data.push(null);this.data[i]==null&&(this.size+=1),this.data[i]=t}len(){return this.size}delete(e){let t=this.index(e);t<this.data.length&&(this.data[t]!=null&&(this.size-=1),this.data[t]=null)}clear(){this.data=new Array}get(e){let t=this.index(e);return t<this.data.length?this.data[t]:null}forEach(e){for(const t of this.data)t!=null&&e(t)}getAll(){return this.data.filter(e=>e!=null)}index(e){return this.fconv[0]=e,this.uconv[0]}}class Pe{free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}constructor(e){this.raw=e||new $e,this.map=new F,e&&e.forEachRigidBodyHandle(t=>{this.map.set(t,new X(e,null,t))})}finalizeDeserialization(e){this.map.forEach(t=>t.finalizeDeserialization(e))}createRigidBody(e,t){let i=n.intoRaw(t.translation),r=u.intoRaw(t.rotation),a=n.intoRaw(t.linvel),o=n.intoRaw(t.centerOfMass),l=n.intoRaw(t.angvel),h=n.intoRaw(t.principalAngularInertia),c=u.intoRaw(t.angularInertiaLocalFrame),w=this.raw.createRigidBody(t.enabled,i,r,t.gravityScale,t.mass,t.massOnly,o,a,l,h,c,t.translationsEnabledX,t.translationsEnabledY,t.translationsEnabledZ,t.rotationsEnabledX,t.rotationsEnabledY,t.rotationsEnabledZ,t.linearDamping,t.angularDamping,t.status,t.canSleep,t.sleeping,t.softCcdPrediction,t.ccdEnabled,t.dominanceGroup,t.additionalSolverIterations);i.free(),r.free(),a.free(),o.free(),l.free(),h.free(),c.free();const d=new X(this.raw,e,w);return d.userData=t.userData,this.map.set(w,d),d}remove(e,t,i,r,a){for(let o=0;o<this.raw.rbNumColliders(e);o+=1)i.unmap(this.raw.rbCollider(e,o));r.forEachJointHandleAttachedToRigidBody(e,o=>r.unmap(o)),a.forEachJointHandleAttachedToRigidBody(e,o=>a.unmap(o)),this.raw.remove(e,t.raw,i.raw,r.raw,a.raw),this.map.delete(e)}len(){return this.map.len()}contains(e){return this.get(e)!=null}get(e){return this.map.get(e)}forEach(e){this.map.forEach(e)}forEachActiveRigidBody(e,t){e.forEachActiveRigidBodyHandle(i=>{t(this.get(i))})}getAll(){return this.map.getAll()}}class _e{constructor(e){this.raw=e||new Qe}free(){this.raw&&this.raw.free(),this.raw=void 0}get dt(){return this.raw.dt}get contact_erp(){return this.raw.contact_erp}get lengthUnit(){return this.raw.lengthUnit}get normalizedAllowedLinearError(){return this.raw.normalizedAllowedLinearError}get normalizedPredictionDistance(){return this.raw.normalizedPredictionDistance}get numSolverIterations(){return this.raw.numSolverIterations}get numInternalPgsIterations(){return this.raw.numInternalPgsIterations}get minIslandSize(){return this.raw.minIslandSize}get maxCcdSubsteps(){return this.raw.maxCcdSubsteps}set dt(e){this.raw.dt=e}set contact_natural_frequency(e){this.raw.contact_natural_frequency=e}set lengthUnit(e){this.raw.lengthUnit=e}set normalizedAllowedLinearError(e){this.raw.normalizedAllowedLinearError=e}set normalizedPredictionDistance(e){this.raw.normalizedPredictionDistance=e}set numSolverIterations(e){this.raw.numSolverIterations=e}set numInternalPgsIterations(e){this.raw.numInternalPgsIterations=e}set minIslandSize(e){this.raw.minIslandSize=e}set maxCcdSubsteps(e){this.raw.maxCcdSubsteps=e}}var S;(function(s){s[s.Revolute=0]="Revolute",s[s.Fixed=1]="Fixed",s[s.Prismatic=2]="Prismatic",s[s.Rope=3]="Rope",s[s.Spring=4]="Spring",s[s.Spherical=5]="Spherical",s[s.Generic=6]="Generic"})(S||(S={}));var H;(function(s){s[s.AccelerationBased=0]="AccelerationBased",s[s.ForceBased=1]="ForceBased"})(H||(H={}));var B;(function(s){s[s.LinX=1]="LinX",s[s.LinY=2]="LinY",s[s.LinZ=4]="LinZ",s[s.AngX=8]="AngX",s[s.AngY=16]="AngY",s[s.AngZ=32]="AngZ"})(B||(B={}));class C{constructor(e,t,i){this.rawSet=e,this.bodySet=t,this.handle=i}static newTyped(e,t,i){switch(e.jointType(i)){case b.Revolute:return new Ae(e,t,i);case b.Prismatic:return new Ee(e,t,i);case b.Fixed:return new ve(e,t,i);case b.Spring:return new ye(e,t,i);case b.Rope:return new Ie(e,t,i);case b.Spherical:return new Me(e,t,i);case b.Generic:return new Te(e,t,i);default:return new C(e,t,i)}}finalizeDeserialization(e){this.bodySet=e}isValid(){return this.rawSet.contains(this.handle)}body1(){return this.bodySet.get(this.rawSet.jointBodyHandle1(this.handle))}body2(){return this.bodySet.get(this.rawSet.jointBodyHandle2(this.handle))}type(){return this.rawSet.jointType(this.handle)}frameX1(){return u.fromRaw(this.rawSet.jointFrameX1(this.handle))}frameX2(){return u.fromRaw(this.rawSet.jointFrameX2(this.handle))}anchor1(){return n.fromRaw(this.rawSet.jointAnchor1(this.handle))}anchor2(){return n.fromRaw(this.rawSet.jointAnchor2(this.handle))}setAnchor1(e){const t=n.intoRaw(e);this.rawSet.jointSetAnchor1(this.handle,t),t.free()}setAnchor2(e){const t=n.intoRaw(e);this.rawSet.jointSetAnchor2(this.handle,t),t.free()}setContactsEnabled(e){this.rawSet.jointSetContactsEnabled(this.handle,e)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class q extends C{limitsEnabled(){return this.rawSet.jointLimitsEnabled(this.handle,this.rawAxis())}limitsMin(){return this.rawSet.jointLimitsMin(this.handle,this.rawAxis())}limitsMax(){return this.rawSet.jointLimitsMax(this.handle,this.rawAxis())}setLimits(e,t){this.rawSet.jointSetLimits(this.handle,this.rawAxis(),e,t)}configureMotorModel(e){this.rawSet.jointConfigureMotorModel(this.handle,this.rawAxis(),e)}configureMotorVelocity(e,t){this.rawSet.jointConfigureMotorVelocity(this.handle,this.rawAxis(),e,t)}configureMotorPosition(e,t,i){this.rawSet.jointConfigureMotorPosition(this.handle,this.rawAxis(),e,t,i)}configureMotor(e,t,i,r){this.rawSet.jointConfigureMotor(this.handle,this.rawAxis(),e,t,i,r)}}class ve extends C{}class Ie extends C{}class ye extends C{}class Ee extends q{rawAxis(){return N.LinX}}class Ae extends q{rawAxis(){return N.AngX}}class Te extends C{}class Me extends C{}class _{constructor(){}static fixed(e,t,i,r){let a=new _;return a.anchor1=e,a.anchor2=i,a.frame1=t,a.frame2=r,a.jointType=S.Fixed,a}static spring(e,t,i,r,a){let o=new _;return o.anchor1=r,o.anchor2=a,o.length=e,o.stiffness=t,o.damping=i,o.jointType=S.Spring,o}static rope(e,t,i){let r=new _;return r.anchor1=t,r.anchor2=i,r.length=e,r.jointType=S.Rope,r}static generic(e,t,i,r){let a=new _;return a.anchor1=e,a.anchor2=t,a.axis=i,a.axesMask=r,a.jointType=S.Generic,a}static spherical(e,t){let i=new _;return i.anchor1=e,i.anchor2=t,i.jointType=S.Spherical,i}static prismatic(e,t,i){let r=new _;return r.anchor1=e,r.anchor2=t,r.axis=i,r.jointType=S.Prismatic,r}static revolute(e,t,i){let r=new _;return r.anchor1=e,r.anchor2=t,r.axis=i,r.jointType=S.Revolute,r}intoRaw(){let e=n.intoRaw(this.anchor1),t=n.intoRaw(this.anchor2),i,r,a=!1,o=0,l=0;switch(this.jointType){case S.Fixed:let h=u.intoRaw(this.frame1),c=u.intoRaw(this.frame2);r=y.fixed(e,h,t,c),h.free(),c.free();break;case S.Spring:r=y.spring(this.length,this.stiffness,this.damping,e,t);break;case S.Rope:r=y.rope(this.length,e,t);break;case S.Prismatic:i=n.intoRaw(this.axis),this.limitsEnabled&&(a=!0,o=this.limits[0],l=this.limits[1]),r=y.prismatic(e,t,i,a,o,l),i.free();break;case S.Generic:i=n.intoRaw(this.axis);let w=this.axesMask;r=y.generic(e,t,i,w);break;case S.Spherical:r=y.spherical(e,t);break;case S.Revolute:i=n.intoRaw(this.axis),r=y.revolute(e,t,i),i.free();break}return e.free(),t.free(),r}}class xe{free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}constructor(e){this.raw=e||new et,this.map=new F,e&&e.forEachJointHandle(t=>{this.map.set(t,C.newTyped(e,null,t))})}finalizeDeserialization(e){this.map.forEach(t=>t.finalizeDeserialization(e))}createJoint(e,t,i,r,a){const o=t.intoRaw(),l=this.raw.createJoint(o,i,r,a);o.free();let h=C.newTyped(this.raw,e,l);return this.map.set(l,h),h}remove(e,t){this.raw.remove(e,t),this.unmap(e)}forEachJointHandleAttachedToRigidBody(e,t){this.raw.forEachJointAttachedToRigidBody(e,t)}unmap(e){this.map.delete(e)}len(){return this.map.len()}contains(e){return this.get(e)!=null}get(e){return this.map.get(e)}forEach(e){this.map.forEach(e)}getAll(){return this.map.getAll()}}class I{constructor(e,t){this.rawSet=e,this.handle=t}static newTyped(e,t){switch(e.jointType(t)){case b.Revolute:return new Fe(e,t);case b.Prismatic:return new Ne(e,t);case b.Fixed:return new De(e,t);case b.Spherical:return new Le(e,t);default:return new I(e,t)}}isValid(){return this.rawSet.contains(this.handle)}setContactsEnabled(e){this.rawSet.jointSetContactsEnabled(this.handle,e)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class $ extends I{}class De extends I{}class Ne extends ${rawAxis(){return N.LinX}}class Fe extends ${rawAxis(){return N.AngX}}class Le extends I{}class ze{free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}constructor(e){this.raw=e||new tt,this.map=new F,e&&e.forEachJointHandle(t=>{this.map.set(t,I.newTyped(this.raw,t))})}createJoint(e,t,i,r){const a=e.intoRaw(),o=this.raw.createJoint(a,t,i,r);a.free();let l=I.newTyped(this.raw,o);return this.map.set(o,l),l}remove(e,t){this.raw.remove(e,t),this.map.delete(e)}unmap(e){this.map.delete(e)}len(){return this.map.len()}contains(e){return this.get(e)!=null}get(e){return this.map.get(e)}forEach(e){this.map.forEach(e)}forEachJointHandleAttachedToRigidBody(e,t){this.raw.forEachJointAttachedToRigidBody(e,t)}getAll(){return this.map.getAll()}}var A;(function(s){s[s.Average=0]="Average",s[s.Min=1]="Min",s[s.Multiply=2]="Multiply",s[s.Max=3]="Max"})(A||(A={}));class We{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e||new it}}class Ge{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e||new rt}forEachActiveRigidBodyHandle(e){this.raw.forEachActiveRigidBodyHandle(e)}}class Oe{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e||new st}castRay(e,t,i,r,a,o,l,h,c,w,d){let p=n.intoRaw(r.origin),m=n.intoRaw(r.dir),g=ie.fromRaw(i,this.raw.castRay(e.raw,t.raw,i.raw,p,m,a,o,l,h,c,w,d));return p.free(),m.free(),g}castRayAndGetNormal(e,t,i,r,a,o,l,h,c,w,d){let p=n.intoRaw(r.origin),m=n.intoRaw(r.dir),g=W.fromRaw(i,this.raw.castRayAndGetNormal(e.raw,t.raw,i.raw,p,m,a,o,l,h,c,w,d));return p.free(),m.free(),g}intersectionsWithRay(e,t,i,r,a,o,l,h,c,w,d,p){let m=n.intoRaw(r.origin),g=n.intoRaw(r.dir),v=T=>l(W.fromRaw(i,T));this.raw.intersectionsWithRay(e.raw,t.raw,i.raw,m,g,a,o,v,h,c,w,d,p),m.free(),g.free()}intersectionWithShape(e,t,i,r,a,o,l,h,c,w,d){let p=n.intoRaw(r),m=u.intoRaw(a),g=o.intoRaw(),v=this.raw.intersectionWithShape(e.raw,t.raw,i.raw,p,m,g,l,h,c,w,d);return p.free(),m.free(),g.free(),v}projectPoint(e,t,i,r,a,o,l,h,c,w){let d=n.intoRaw(r),p=G.fromRaw(i,this.raw.projectPoint(e.raw,t.raw,i.raw,d,a,o,l,h,c,w));return d.free(),p}projectPointAndGetFeature(e,t,i,r,a,o,l,h,c){let w=n.intoRaw(r),d=G.fromRaw(i,this.raw.projectPointAndGetFeature(e.raw,t.raw,i.raw,w,a,o,l,h,c));return w.free(),d}intersectionsWithPoint(e,t,i,r,a,o,l,h,c,w){let d=n.intoRaw(r);this.raw.intersectionsWithPoint(e.raw,t.raw,i.raw,d,a,o,l,h,c,w),d.free()}castShape(e,t,i,r,a,o,l,h,c,w,d,p,m,g,v){let T=n.intoRaw(r),Q=u.intoRaw(a),ee=n.intoRaw(o),te=l.intoRaw(),qe=Z.fromRaw(i,this.raw.castShape(e.raw,t.raw,i.raw,T,Q,ee,te,h,c,w,d,p,m,g,v));return T.free(),Q.free(),ee.free(),te.free(),qe}intersectionsWithShape(e,t,i,r,a,o,l,h,c,w,d,p){let m=n.intoRaw(r),g=u.intoRaw(a),v=o.intoRaw();this.raw.intersectionsWithShape(e.raw,t.raw,i.raw,m,g,v,l,h,c,w,d,p),m.free(),g.free(),v.free()}collidersWithAabbIntersectingAabb(e,t,i,r,a,o){let l=n.intoRaw(r),h=n.intoRaw(a);this.raw.collidersWithAabbIntersectingAabb(e.raw,t.raw,i.raw,l,h,o),l.free(),h.free()}}class Ve{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e||new at,this.tempManifold=new je(null)}contactPairsWith(e,t){this.raw.contact_pairs_with(e,t)}intersectionPairsWith(e,t){this.raw.intersection_pairs_with(e,t)}contactPair(e,t,i){const r=this.raw.contact_pair(e,t);if(r){const a=r.collider1()!=e;let o;for(o=0;o<r.numContactManifolds();++o)this.tempManifold.raw=r.contactManifold(o),this.tempManifold.raw&&i(this.tempManifold,a),this.tempManifold.free();r.free()}}intersectionPair(e,t){return this.raw.intersection_pair(e,t)}}class je{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e}normal(){return n.fromRaw(this.raw.normal())}localNormal1(){return n.fromRaw(this.raw.local_n1())}localNormal2(){return n.fromRaw(this.raw.local_n2())}subshape1(){return this.raw.subshape1()}subshape2(){return this.raw.subshape2()}numContacts(){return this.raw.num_contacts()}localContactPoint1(e){return n.fromRaw(this.raw.contact_local_p1(e))}localContactPoint2(e){return n.fromRaw(this.raw.contact_local_p2(e))}contactDist(e){return this.raw.contact_dist(e)}contactFid1(e){return this.raw.contact_fid1(e)}contactFid2(e){return this.raw.contact_fid2(e)}contactImpulse(e){return this.raw.contact_impulse(e)}contactTangentImpulseX(e){return this.raw.contact_tangent_impulse_x(e)}contactTangentImpulseY(e){return this.raw.contact_tangent_impulse_y(e)}numSolverContacts(){return this.raw.num_solver_contacts()}solverContactPoint(e){return n.fromRaw(this.raw.solver_contact_point(e))}solverContactDist(e){return this.raw.solver_contact_dist(e)}solverContactFriction(e){return this.raw.solver_contact_friction(e)}solverContactRestitution(e){return this.raw.solver_contact_restitution(e)}solverContactTangentVelocity(e){return n.fromRaw(this.raw.solver_contact_tangent_velocity(e))}}class Xe{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e||new nt}step(e,t,i,r,a,o,l,h,c,w,d,p){let m=n.intoRaw(e);d?this.raw.stepWithEvents(m,t.raw,i.raw,r.raw,a.raw,o.raw,l.raw,h.raw,c.raw,w.raw,d.raw,p,p?p.filterContactPair:null,p?p.filterIntersectionPair:null):this.raw.step(m,t.raw,i.raw,r.raw,a.raw,o.raw,l.raw,h.raw,c.raw,w.raw),m.free()}}class U{free(){this.raw&&this.raw.free(),this.raw=void 0}constructor(e){this.raw=e||new ot}serializeAll(e,t,i,r,a,o,l,h,c){let w=n.intoRaw(e);const d=this.raw.serializeAll(w,t.raw,i.raw,r.raw,a.raw,o.raw,l.raw,h.raw,c.raw);return w.free(),d}deserializeAll(e){return L.fromRaw(this.raw.deserializeAll(e))}}class He{constructor(e,t){this.vertices=e,this.colors=t}}class Be{free(){this.raw&&this.raw.free(),this.raw=void 0,this.vertices=void 0,this.colors=void 0}constructor(e){this.raw=e||new lt}render(e,t,i,r,a,o,l){this.raw.render(e.raw,t.raw,i.raw,r.raw,a.raw,o,t.castClosure(l)),this.vertices=this.raw.vertices(),this.colors=this.raw.colors()}}class Ue{}class Ye{constructor(e,t,i,r,a,o){this.params=t,this.bodies=a,this.colliders=o,this.broadPhase=i,this.narrowPhase=r,this.raw=new ht(e),this.rawCharacterCollision=new ct,this._applyImpulsesToDynamicBodies=!1,this._characterMass=null}free(){this.raw&&(this.raw.free(),this.rawCharacterCollision.free()),this.raw=void 0,this.rawCharacterCollision=void 0}up(){return this.raw.up()}setUp(e){let t=n.intoRaw(e);return this.raw.setUp(t)}applyImpulsesToDynamicBodies(){return this._applyImpulsesToDynamicBodies}setApplyImpulsesToDynamicBodies(e){this._applyImpulsesToDynamicBodies=e}characterMass(){return this._characterMass}setCharacterMass(e){this._characterMass=e}offset(){return this.raw.offset()}setOffset(e){this.raw.setOffset(e)}normalNudgeFactor(){return this.raw.normalNudgeFactor()}setNormalNudgeFactor(e){this.raw.setNormalNudgeFactor(e)}slideEnabled(){return this.raw.slideEnabled()}setSlideEnabled(e){this.raw.setSlideEnabled(e)}autostepMaxHeight(){return this.raw.autostepMaxHeight()}autostepMinWidth(){return this.raw.autostepMinWidth()}autostepIncludesDynamicBodies(){return this.raw.autostepIncludesDynamicBodies()}autostepEnabled(){return this.raw.autostepEnabled()}enableAutostep(e,t,i){this.raw.enableAutostep(e,t,i)}disableAutostep(){return this.raw.disableAutostep()}maxSlopeClimbAngle(){return this.raw.maxSlopeClimbAngle()}setMaxSlopeClimbAngle(e){this.raw.setMaxSlopeClimbAngle(e)}minSlopeSlideAngle(){return this.raw.minSlopeSlideAngle()}setMinSlopeSlideAngle(e){this.raw.setMinSlopeSlideAngle(e)}snapToGroundDistance(){return this.raw.snapToGroundDistance()}enableSnapToGround(e){this.raw.enableSnapToGround(e)}disableSnapToGround(){this.raw.disableSnapToGround()}snapToGroundEnabled(){return this.raw.snapToGroundEnabled()}computeColliderMovement(e,t,i,r,a){let o=n.intoRaw(t);this.raw.computeColliderMovement(this.params.dt,this.broadPhase.raw,this.narrowPhase.raw,this.bodies.raw,this.colliders.raw,e.handle,o,this._applyImpulsesToDynamicBodies,this._characterMass,i,r,this.colliders.castClosure(a)),o.free()}computedMovement(){return n.fromRaw(this.raw.computedMovement())}computedGrounded(){return this.raw.computedGrounded()}numComputedCollisions(){return this.raw.numComputedCollisions()}computedCollision(e,t){if(this.raw.computedCollision(e,this.rawCharacterCollision)){let i=this.rawCharacterCollision;return t=t??new Ue,t.translationDeltaApplied=n.fromRaw(i.translationDeltaApplied()),t.translationDeltaRemaining=n.fromRaw(i.translationDeltaRemaining()),t.toi=i.toi(),t.witness1=n.fromRaw(i.worldWitness1()),t.witness2=n.fromRaw(i.worldWitness2()),t.normal1=n.fromRaw(i.worldNormal1()),t.normal2=n.fromRaw(i.worldNormal2()),t.collider=this.colliders.get(i.handle()),t}else return null}}var Y;(function(s){s[s.None=0]="None",s[s.LinX=1]="LinX",s[s.LinY=2]="LinY",s[s.LinZ=4]="LinZ",s[s.AngX=8]="AngX",s[s.AngY=16]="AngY",s[s.AngZ=32]="AngZ",s[s.AllLin=7]="AllLin",s[s.AllAng=56]="AllAng",s[s.All=63]="All"})(Y||(Y={}));class Je{constructor(e,t,i,r,a,o){this.params=e,this.bodies=t,this.raw=new wt(i,r,a,o)}free(){this.raw&&this.raw.free(),this.raw=void 0}setKp(e,t){this.raw.set_kp(e,t)}setKi(e,t){this.raw.set_kp(e,t)}setKd(e,t){this.raw.set_kp(e,t)}setAxes(e){this.raw.set_axes_mask(e)}resetIntegrals(){this.raw.reset_integrals()}applyLinearCorrection(e,t,i){let r=n.intoRaw(t),a=n.intoRaw(i);this.raw.apply_linear_correction(this.params.dt,this.bodies.raw,e.handle,r,a),r.free(),a.free()}applyAngularCorrection(e,t,i){let r=u.intoRaw(t),a=n.intoRaw(i);this.raw.apply_angular_correction(this.params.dt,this.bodies.raw,e.handle,r,a),r.free(),a.free()}linearCorrection(e,t,i){let r=n.intoRaw(t),a=n.intoRaw(i),o=this.raw.linear_correction(this.params.dt,this.bodies.raw,e.handle,r,a);return r.free(),a.free(),n.fromRaw(o)}angularCorrection(e,t,i){let r=u.intoRaw(t),a=n.intoRaw(i),o=this.raw.angular_correction(this.params.dt,this.bodies.raw,e.handle,r,a);return r.free(),a.free(),n.fromRaw(o)}}class Ke{constructor(e,t,i,r,a){this.raw=new dt(e.handle),this.broadPhase=t,this.narrowPhase=i,this.bodies=r,this.colliders=a,this._chassis=e}free(){this.raw&&this.raw.free(),this.raw=void 0}updateVehicle(e,t,i,r){this.raw.update_vehicle(e,this.broadPhase.raw,this.narrowPhase.raw,this.bodies.raw,this.colliders.raw,t,i,this.colliders.castClosure(r))}currentVehicleSpeed(){return this.raw.current_vehicle_speed()}chassis(){return this._chassis}get indexUpAxis(){return this.raw.index_up_axis()}set indexUpAxis(e){this.raw.set_index_up_axis(e)}get indexForwardAxis(){return this.raw.index_forward_axis()}set setIndexForwardAxis(e){this.raw.set_index_forward_axis(e)}addWheel(e,t,i,r,a){let o=n.intoRaw(e),l=n.intoRaw(t),h=n.intoRaw(i);this.raw.add_wheel(o,l,h,r,a),o.free(),l.free(),h.free()}numWheels(){return this.raw.num_wheels()}wheelChassisConnectionPointCs(e){return n.fromRaw(this.raw.wheel_chassis_connection_point_cs(e))}setWheelChassisConnectionPointCs(e,t){let i=n.intoRaw(t);this.raw.set_wheel_chassis_connection_point_cs(e,i),i.free()}wheelSuspensionRestLength(e){return this.raw.wheel_suspension_rest_length(e)}setWheelSuspensionRestLength(e,t){this.raw.set_wheel_suspension_rest_length(e,t)}wheelMaxSuspensionTravel(e){return this.raw.wheel_max_suspension_travel(e)}setWheelMaxSuspensionTravel(e,t){this.raw.set_wheel_max_suspension_travel(e,t)}wheelRadius(e){return this.raw.wheel_radius(e)}setWheelRadius(e,t){this.raw.set_wheel_radius(e,t)}wheelSuspensionStiffness(e){return this.raw.wheel_suspension_stiffness(e)}setWheelSuspensionStiffness(e,t){this.raw.set_wheel_suspension_stiffness(e,t)}wheelSuspensionCompression(e){return this.raw.wheel_suspension_compression(e)}setWheelSuspensionCompression(e,t){this.raw.set_wheel_suspension_compression(e,t)}wheelSuspensionRelaxation(e){return this.raw.wheel_suspension_relaxation(e)}setWheelSuspensionRelaxation(e,t){this.raw.set_wheel_suspension_relaxation(e,t)}wheelMaxSuspensionForce(e){return this.raw.wheel_max_suspension_force(e)}setWheelMaxSuspensionForce(e,t){this.raw.set_wheel_max_suspension_force(e,t)}wheelBrake(e){return this.raw.wheel_brake(e)}setWheelBrake(e,t){this.raw.set_wheel_brake(e,t)}wheelSteering(e){return this.raw.wheel_steering(e)}setWheelSteering(e,t){this.raw.set_wheel_steering(e,t)}wheelEngineForce(e){return this.raw.wheel_engine_force(e)}setWheelEngineForce(e,t){this.raw.set_wheel_engine_force(e,t)}wheelDirectionCs(e){return n.fromRaw(this.raw.wheel_direction_cs(e))}setWheelDirectionCs(e,t){let i=n.intoRaw(t);this.raw.set_wheel_direction_cs(e,i),i.free()}wheelAxleCs(e){return n.fromRaw(this.raw.wheel_axle_cs(e))}setWheelAxleCs(e,t){let i=n.intoRaw(t);this.raw.set_wheel_axle_cs(e,i),i.free()}wheelFrictionSlip(e){return this.raw.wheel_friction_slip(e)}setWheelFrictionSlip(e,t){this.raw.set_wheel_friction_slip(e,t)}wheelSideFrictionStiffness(e){return this.raw.wheel_side_friction_stiffness(e)}setWheelSideFrictionStiffness(e,t){this.raw.set_wheel_side_friction_stiffness(e,t)}wheelRotation(e){return this.raw.wheel_rotation(e)}wheelForwardImpulse(e){return this.raw.wheel_forward_impulse(e)}wheelSideImpulse(e){return this.raw.wheel_side_impulse(e)}wheelSuspensionForce(e){return this.raw.wheel_suspension_force(e)}wheelContactNormal(e){return n.fromRaw(this.raw.wheel_contact_normal_ws(e))}wheelContactPoint(e){return n.fromRaw(this.raw.wheel_contact_point_ws(e))}wheelSuspensionLength(e){return this.raw.wheel_suspension_length(e)}wheelHardPoint(e){return n.fromRaw(this.raw.wheel_hard_point_ws(e))}wheelIsInContact(e){return this.raw.wheel_is_in_contact(e)}wheelGroundObject(e){return this.colliders.get(this.raw.wheel_ground_object(e))}}class L{free(){this.integrationParameters.free(),this.islands.free(),this.broadPhase.free(),this.narrowPhase.free(),this.bodies.free(),this.colliders.free(),this.impulseJoints.free(),this.multibodyJoints.free(),this.ccdSolver.free(),this.physicsPipeline.free(),this.serializationPipeline.free(),this.debugRenderPipeline.free(),this.characterControllers.forEach(e=>e.free()),this.pidControllers.forEach(e=>e.free()),this.vehicleControllers.forEach(e=>e.free()),this.integrationParameters=void 0,this.islands=void 0,this.broadPhase=void 0,this.narrowPhase=void 0,this.bodies=void 0,this.colliders=void 0,this.ccdSolver=void 0,this.impulseJoints=void 0,this.multibodyJoints=void 0,this.physicsPipeline=void 0,this.serializationPipeline=void 0,this.debugRenderPipeline=void 0,this.characterControllers=void 0,this.pidControllers=void 0,this.vehicleControllers=void 0}constructor(e,t,i,r,a,o,l,h,c,w,d,p,m){this.gravity=e,this.integrationParameters=new _e(t),this.islands=new Ge(i),this.broadPhase=new Oe(r),this.narrowPhase=new Ve(a),this.bodies=new Pe(o),this.colliders=new Ze(l),this.impulseJoints=new xe(h),this.multibodyJoints=new ze(c),this.ccdSolver=new We(w),this.physicsPipeline=new Xe(d),this.serializationPipeline=new U(p),this.debugRenderPipeline=new Be(m),this.characterControllers=new Set,this.pidControllers=new Set,this.vehicleControllers=new Set,this.impulseJoints.finalizeDeserialization(this.bodies),this.bodies.finalizeDeserialization(this.colliders),this.colliders.finalizeDeserialization(this.bodies)}static fromRaw(e){return e?new L(n.fromRaw(e.takeGravity()),e.takeIntegrationParameters(),e.takeIslandManager(),e.takeBroadPhase(),e.takeNarrowPhase(),e.takeBodies(),e.takeColliders(),e.takeImpulseJoints(),e.takeMultibodyJoints()):null}takeSnapshot(){return this.serializationPipeline.serializeAll(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints)}static restoreSnapshot(e){return new U().deserializeAll(e)}debugRender(e,t){return this.debugRenderPipeline.render(this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.narrowPhase,e,t),new He(this.debugRenderPipeline.vertices,this.debugRenderPipeline.colors)}step(e,t){this.physicsPipeline.step(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.ccdSolver,e,t)}propagateModifiedBodyPositionsToColliders(){this.bodies.raw.propagateModifiedBodyPositionsToColliders(this.colliders.raw)}get timestep(){return this.integrationParameters.dt}set timestep(e){this.integrationParameters.dt=e}get lengthUnit(){return this.integrationParameters.lengthUnit}set lengthUnit(e){this.integrationParameters.lengthUnit=e}get numSolverIterations(){return this.integrationParameters.numSolverIterations}set numSolverIterations(e){this.integrationParameters.numSolverIterations=e}get numInternalPgsIterations(){return this.integrationParameters.numInternalPgsIterations}set numInternalPgsIterations(e){this.integrationParameters.numInternalPgsIterations=e}get maxCcdSubsteps(){return this.integrationParameters.maxCcdSubsteps}set maxCcdSubsteps(e){this.integrationParameters.maxCcdSubsteps=e}createRigidBody(e){return this.bodies.createRigidBody(this.colliders,e)}createCharacterController(e){let t=new Ye(e,this.integrationParameters,this.broadPhase,this.narrowPhase,this.bodies,this.colliders);return this.characterControllers.add(t),t}removeCharacterController(e){this.characterControllers.delete(e),e.free()}createPidController(e,t,i,r){let a=new Je(this.integrationParameters,this.bodies,e,t,i,r);return this.pidControllers.add(a),a}removePidController(e){this.pidControllers.delete(e),e.free()}createVehicleController(e){let t=new Ke(e,this.broadPhase,this.narrowPhase,this.bodies,this.colliders);return this.vehicleControllers.add(t),t}removeVehicleController(e){this.vehicleControllers.delete(e),e.free()}createCollider(e,t){let i=t?t.handle:void 0;return this.colliders.createCollider(this.bodies,e,i)}createImpulseJoint(e,t,i,r){return this.impulseJoints.createJoint(this.bodies,e,t.handle,i.handle,r)}createMultibodyJoint(e,t,i,r){return this.multibodyJoints.createJoint(e,t.handle,i.handle,r)}getRigidBody(e){return this.bodies.get(e)}getCollider(e){return this.colliders.get(e)}getImpulseJoint(e){return this.impulseJoints.get(e)}getMultibodyJoint(e){return this.multibodyJoints.get(e)}removeRigidBody(e){this.bodies&&this.bodies.remove(e.handle,this.islands,this.colliders,this.impulseJoints,this.multibodyJoints)}removeCollider(e,t){this.colliders&&this.colliders.remove(e.handle,this.islands,this.bodies,t)}removeImpulseJoint(e,t){this.impulseJoints&&this.impulseJoints.remove(e.handle,t)}removeMultibodyJoint(e,t){this.impulseJoints&&this.multibodyJoints.remove(e.handle,t)}forEachCollider(e){this.colliders.forEach(e)}forEachRigidBody(e){this.bodies.forEach(e)}forEachActiveRigidBody(e){this.bodies.forEachActiveRigidBody(this.islands,e)}castRay(e,t,i,r,a,o,l,h){return this.broadPhase.castRay(this.narrowPhase,this.bodies,this.colliders,e,t,i,r,a,o?o.handle:null,l?l.handle:null,this.colliders.castClosure(h))}castRayAndGetNormal(e,t,i,r,a,o,l,h){return this.broadPhase.castRayAndGetNormal(this.narrowPhase,this.bodies,this.colliders,e,t,i,r,a,o?o.handle:null,l?l.handle:null,this.colliders.castClosure(h))}intersectionsWithRay(e,t,i,r,a,o,l,h,c){this.broadPhase.intersectionsWithRay(this.narrowPhase,this.bodies,this.colliders,e,t,i,r,a,o,l?l.handle:null,h?h.handle:null,this.colliders.castClosure(c))}intersectionWithShape(e,t,i,r,a,o,l,h){let c=this.broadPhase.intersectionWithShape(this.narrowPhase,this.bodies,this.colliders,e,t,i,r,a,o?o.handle:null,l?l.handle:null,this.colliders.castClosure(h));return c!=null?this.colliders.get(c):null}projectPoint(e,t,i,r,a,o,l){return this.broadPhase.projectPoint(this.narrowPhase,this.bodies,this.colliders,e,t,i,r,a?a.handle:null,o?o.handle:null,this.colliders.castClosure(l))}projectPointAndGetFeature(e,t,i,r,a,o){return this.broadPhase.projectPointAndGetFeature(this.narrowPhase,this.bodies,this.colliders,e,t,i,r?r.handle:null,a?a.handle:null,this.colliders.castClosure(o))}intersectionsWithPoint(e,t,i,r,a,o,l){this.broadPhase.intersectionsWithPoint(this.narrowPhase,this.bodies,this.colliders,e,this.colliders.castClosure(t),i,r,a?a.handle:null,o?o.handle:null,this.colliders.castClosure(l))}castShape(e,t,i,r,a,o,l,h,c,w,d,p){return this.broadPhase.castShape(this.narrowPhase,this.bodies,this.colliders,e,t,i,r,a,o,l,h,c,w?w.handle:null,d?d.handle:null,this.colliders.castClosure(p))}intersectionsWithShape(e,t,i,r,a,o,l,h,c){this.broadPhase.intersectionsWithShape(this.narrowPhase,this.bodies,this.colliders,e,t,i,this.colliders.castClosure(r),a,o,l?l.handle:null,h?h.handle:null,this.colliders.castClosure(c))}collidersWithAabbIntersectingAabb(e,t,i){this.broadPhase.collidersWithAabbIntersectingAabb(this.narrowPhase,this.bodies,this.colliders,e,t,this.colliders.castClosure(i))}contactPairsWith(e,t){this.narrowPhase.contactPairsWith(e.handle,this.colliders.castClosure(t))}intersectionPairsWith(e,t){this.narrowPhase.intersectionPairsWith(e.handle,this.colliders.castClosure(t))}contactPair(e,t,i){this.narrowPhase.contactPair(e.handle,t.handle,i)}intersectionPair(e,t){return this.narrowPhase.intersectionPair(e.handle,t.handle)}set profilerEnabled(e){this.physicsPipeline.raw.set_profiler_enabled(e)}get profilerEnabled(){return this.physicsPipeline.raw.is_profiler_enabled()}timingStep(){return this.physicsPipeline.raw.timing_step()}timingCollisionDetection(){return this.physicsPipeline.raw.timing_collision_detection()}timingBroadPhase(){return this.physicsPipeline.raw.timing_broad_phase()}timingNarrowPhase(){return this.physicsPipeline.raw.timing_narrow_phase()}timingSolver(){return this.physicsPipeline.raw.timing_solver()}timingVelocityAssembly(){return this.physicsPipeline.raw.timing_velocity_assembly()}timingVelocityResolution(){return this.physicsPipeline.raw.timing_velocity_resolution()}timingVelocityUpdate(){return this.physicsPipeline.raw.timing_velocity_update()}timingVelocityWriteback(){return this.physicsPipeline.raw.timing_velocity_writeback()}timingCcd(){return this.physicsPipeline.raw.timing_ccd()}timingCcdToiComputation(){return this.physicsPipeline.raw.timing_ccd_toi_computation()}timingCcdBroadPhase(){return this.physicsPipeline.raw.timing_ccd_broad_phase()}timingCcdNarrowPhase(){return this.physicsPipeline.raw.timing_ccd_narrow_phase()}timingCcdSolver(){return this.physicsPipeline.raw.timing_ccd_solver()}timingIslandConstruction(){return this.physicsPipeline.raw.timing_island_construction()}timingUserChanges(){return this.physicsPipeline.raw.timing_user_changes()}}var M;(function(s){s[s.NONE=0]="NONE",s[s.COLLISION_EVENTS=1]="COLLISION_EVENTS",s[s.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS"})(M||(M={}));class ke{free(){this.raw&&this.raw.free(),this.raw=void 0}collider1(){return this.raw.collider1()}collider2(){return this.raw.collider2()}totalForce(){return n.fromRaw(this.raw.total_force())}totalForceMagnitude(){return this.raw.total_force_magnitude()}maxForceDirection(){return n.fromRaw(this.raw.max_force_direction())}maxForceMagnitude(){return this.raw.max_force_magnitude()}}class yt{constructor(e,t){this.raw=t||new ut(e)}free(){this.raw&&this.raw.free(),this.raw=void 0}drainCollisionEvents(e){this.raw.drainCollisionEvents(e)}drainContactForceEvents(e){let t=new ke;this.raw.drainContactForceEvents(i=>{t.raw=i,e(t),t.free()})}clear(){this.raw.clear()}}var x;(function(s){s[s.NONE=0]="NONE",s[s.FILTER_CONTACT_PAIRS=1]="FILTER_CONTACT_PAIRS",s[s.FILTER_INTERSECTION_PAIRS=2]="FILTER_INTERSECTION_PAIRS"})(x||(x={}));var J;(function(s){s[s.EMPTY=0]="EMPTY",s[s.COMPUTE_IMPULSE=1]="COMPUTE_IMPULSE"})(J||(J={}));var K;(function(s){s[s.EXCLUDE_FIXED=1]="EXCLUDE_FIXED",s[s.EXCLUDE_KINEMATIC=2]="EXCLUDE_KINEMATIC",s[s.EXCLUDE_DYNAMIC=4]="EXCLUDE_DYNAMIC",s[s.EXCLUDE_SENSORS=8]="EXCLUDE_SENSORS",s[s.EXCLUDE_SOLIDS=16]="EXCLUDE_SOLIDS",s[s.ONLY_DYNAMIC=3]="ONLY_DYNAMIC",s[s.ONLY_KINEMATIC=5]="ONLY_KINEMATIC",s[s.ONLY_FIXED=6]="ONLY_FIXED"})(K||(K={}));var D;(function(s){s[s.DYNAMIC_DYNAMIC=1]="DYNAMIC_DYNAMIC",s[s.DYNAMIC_KINEMATIC=12]="DYNAMIC_KINEMATIC",s[s.DYNAMIC_FIXED=2]="DYNAMIC_FIXED",s[s.KINEMATIC_KINEMATIC=52224]="KINEMATIC_KINEMATIC",s[s.KINEMATIC_FIXED=8704]="KINEMATIC_FIXED",s[s.FIXED_FIXED=32]="FIXED_FIXED",s[s.DEFAULT=15]="DEFAULT",s[s.ALL=60943]="ALL"})(D||(D={}));class k{constructor(e,t,i,r){this.colliderSet=e,this.handle=t,this._parent=i,this._shape=r}finalizeDeserialization(e){this.handle!=null&&(this._parent=e.get(this.colliderSet.raw.coParent(this.handle)))}ensureShapeIsCached(){this._shape||(this._shape=re.fromRaw(this.colliderSet.raw,this.handle))}get shape(){return this.ensureShapeIsCached(),this._shape}clearShapeCache(){this._shape=null}isValid(){return this.colliderSet.raw.contains(this.handle)}translation(){return n.fromRaw(this.colliderSet.raw.coTranslation(this.handle))}translationWrtParent(){return n.fromRaw(this.colliderSet.raw.coTranslationWrtParent(this.handle))}rotation(){return u.fromRaw(this.colliderSet.raw.coRotation(this.handle))}rotationWrtParent(){return u.fromRaw(this.colliderSet.raw.coRotationWrtParent(this.handle))}isSensor(){return this.colliderSet.raw.coIsSensor(this.handle)}setSensor(e){this.colliderSet.raw.coSetSensor(this.handle,e)}setShape(e){let t=e.intoRaw();this.colliderSet.raw.coSetShape(this.handle,t),t.free(),this._shape=e}setEnabled(e){this.colliderSet.raw.coSetEnabled(this.handle,e)}isEnabled(){return this.colliderSet.raw.coIsEnabled(this.handle)}setRestitution(e){this.colliderSet.raw.coSetRestitution(this.handle,e)}setFriction(e){this.colliderSet.raw.coSetFriction(this.handle,e)}frictionCombineRule(){return this.colliderSet.raw.coFrictionCombineRule(this.handle)}setFrictionCombineRule(e){this.colliderSet.raw.coSetFrictionCombineRule(this.handle,e)}restitutionCombineRule(){return this.colliderSet.raw.coRestitutionCombineRule(this.handle)}setRestitutionCombineRule(e){this.colliderSet.raw.coSetRestitutionCombineRule(this.handle,e)}setCollisionGroups(e){this.colliderSet.raw.coSetCollisionGroups(this.handle,e)}setSolverGroups(e){this.colliderSet.raw.coSetSolverGroups(this.handle,e)}contactSkin(){return this.colliderSet.raw.coContactSkin(this.handle)}setContactSkin(e){return this.colliderSet.raw.coSetContactSkin(this.handle,e)}activeHooks(){return this.colliderSet.raw.coActiveHooks(this.handle)}setActiveHooks(e){this.colliderSet.raw.coSetActiveHooks(this.handle,e)}activeEvents(){return this.colliderSet.raw.coActiveEvents(this.handle)}setActiveEvents(e){this.colliderSet.raw.coSetActiveEvents(this.handle,e)}activeCollisionTypes(){return this.colliderSet.raw.coActiveCollisionTypes(this.handle)}setContactForceEventThreshold(e){return this.colliderSet.raw.coSetContactForceEventThreshold(this.handle,e)}contactForceEventThreshold(){return this.colliderSet.raw.coContactForceEventThreshold(this.handle)}setActiveCollisionTypes(e){this.colliderSet.raw.coSetActiveCollisionTypes(this.handle,e)}setDensity(e){this.colliderSet.raw.coSetDensity(this.handle,e)}setMass(e){this.colliderSet.raw.coSetMass(this.handle,e)}setMassProperties(e,t,i,r){let a=n.intoRaw(t),o=n.intoRaw(i),l=u.intoRaw(r);this.colliderSet.raw.coSetMassProperties(this.handle,e,a,o,l),a.free(),o.free(),l.free()}setTranslation(e){this.colliderSet.raw.coSetTranslation(this.handle,e.x,e.y,e.z)}setTranslationWrtParent(e){this.colliderSet.raw.coSetTranslationWrtParent(this.handle,e.x,e.y,e.z)}setRotation(e){this.colliderSet.raw.coSetRotation(this.handle,e.x,e.y,e.z,e.w)}setRotationWrtParent(e){this.colliderSet.raw.coSetRotationWrtParent(this.handle,e.x,e.y,e.z,e.w)}shapeType(){return this.colliderSet.raw.coShapeType(this.handle)}halfExtents(){return n.fromRaw(this.colliderSet.raw.coHalfExtents(this.handle))}setHalfExtents(e){const t=n.intoRaw(e);this.colliderSet.raw.coSetHalfExtents(this.handle,t)}radius(){return this.colliderSet.raw.coRadius(this.handle)}setRadius(e){this.colliderSet.raw.coSetRadius(this.handle,e)}roundRadius(){return this.colliderSet.raw.coRoundRadius(this.handle)}setRoundRadius(e){this.colliderSet.raw.coSetRoundRadius(this.handle,e)}halfHeight(){return this.colliderSet.raw.coHalfHeight(this.handle)}setHalfHeight(e){this.colliderSet.raw.coSetHalfHeight(this.handle,e)}setVoxel(e,t,i,r){this.colliderSet.raw.coSetVoxel(this.handle,e,t,i,r),this._shape=null}propagateVoxelChange(e,t,i,r,a,o,l){this.colliderSet.raw.coPropagateVoxelChange(this.handle,e.handle,t,i,r,a,o,l),this._shape=null}combineVoxelStates(e,t,i,r){this.colliderSet.raw.coCombineVoxelStates(this.handle,e.handle,t,i,r),this._shape=null}vertices(){return this.colliderSet.raw.coVertices(this.handle)}indices(){return this.colliderSet.raw.coIndices(this.handle)}heightfieldHeights(){return this.colliderSet.raw.coHeightfieldHeights(this.handle)}heightfieldScale(){let e=this.colliderSet.raw.coHeightfieldScale(this.handle);return n.fromRaw(e)}heightfieldNRows(){return this.colliderSet.raw.coHeightfieldNRows(this.handle)}heightfieldNCols(){return this.colliderSet.raw.coHeightfieldNCols(this.handle)}parent(){return this._parent}friction(){return this.colliderSet.raw.coFriction(this.handle)}restitution(){return this.colliderSet.raw.coRestitution(this.handle)}density(){return this.colliderSet.raw.coDensity(this.handle)}mass(){return this.colliderSet.raw.coMass(this.handle)}volume(){return this.colliderSet.raw.coVolume(this.handle)}collisionGroups(){return this.colliderSet.raw.coCollisionGroups(this.handle)}solverGroups(){return this.colliderSet.raw.coSolverGroups(this.handle)}containsPoint(e){let t=n.intoRaw(e),i=this.colliderSet.raw.coContainsPoint(this.handle,t);return t.free(),i}projectPoint(e,t){let i=n.intoRaw(e),r=se.fromRaw(this.colliderSet.raw.coProjectPoint(this.handle,i,t));return i.free(),r}intersectsRay(e,t){let i=n.intoRaw(e.origin),r=n.intoRaw(e.dir),a=this.colliderSet.raw.coIntersectsRay(this.handle,i,r,t);return i.free(),r.free(),a}castShape(e,t,i,r,a,o,l,h){let c=n.intoRaw(e),w=n.intoRaw(i),d=u.intoRaw(r),p=n.intoRaw(a),m=t.intoRaw(),g=ae.fromRaw(this.colliderSet,this.colliderSet.raw.coCastShape(this.handle,c,m,w,d,p,o,l,h));return c.free(),w.free(),d.free(),p.free(),m.free(),g}castCollider(e,t,i,r,a,o){let l=n.intoRaw(e),h=n.intoRaw(i),c=Z.fromRaw(this.colliderSet,this.colliderSet.raw.coCastCollider(this.handle,l,t.handle,h,r,a,o));return l.free(),h.free(),c}intersectsShape(e,t,i){let r=n.intoRaw(t),a=u.intoRaw(i),o=e.intoRaw(),l=this.colliderSet.raw.coIntersectsShape(this.handle,o,r,a);return r.free(),a.free(),o.free(),l}contactShape(e,t,i,r){let a=n.intoRaw(t),o=u.intoRaw(i),l=e.intoRaw(),h=O.fromRaw(this.colliderSet.raw.coContactShape(this.handle,l,a,o,r));return a.free(),o.free(),l.free(),h}contactCollider(e,t){return O.fromRaw(this.colliderSet.raw.coContactCollider(this.handle,e.handle,t))}castRay(e,t,i){let r=n.intoRaw(e.origin),a=n.intoRaw(e.dir),o=this.colliderSet.raw.coCastRay(this.handle,r,a,t,i);return r.free(),a.free(),o}castRayAndGetNormal(e,t,i){let r=n.intoRaw(e.origin),a=n.intoRaw(e.dir),o=ne.fromRaw(this.colliderSet.raw.coCastRayAndGetNormal(this.handle,r,a,t,i));return r.free(),a.free(),o}}var E;(function(s){s[s.Density=0]="Density",s[s.Mass=1]="Mass",s[s.MassProps=2]="MassProps"})(E||(E={}));class f{constructor(e){this.enabled=!0,this.shape=e,this.massPropsMode=E.Density,this.density=1,this.friction=.5,this.restitution=0,this.rotation=u.identity(),this.translation=n.zeros(),this.isSensor=!1,this.collisionGroups=4294967295,this.solverGroups=4294967295,this.frictionCombineRule=A.Average,this.restitutionCombineRule=A.Average,this.activeCollisionTypes=D.DEFAULT,this.activeEvents=M.NONE,this.activeHooks=x.NONE,this.mass=0,this.centerOfMass=n.zeros(),this.contactForceEventThreshold=0,this.contactSkin=0,this.principalAngularInertia=n.zeros(),this.angularInertiaLocalFrame=u.identity()}static ball(e){const t=new oe(e);return new f(t)}static capsule(e,t){const i=new le(e,t);return new f(i)}static segment(e,t){const i=new he(e,t);return new f(i)}static triangle(e,t,i){const r=new ce(e,t,i);return new f(r)}static roundTriangle(e,t,i,r){const a=new we(e,t,i,r);return new f(a)}static polyline(e,t){const i=new de(e,t);return new f(i)}static voxels(e,t){const i=new ue(e,t);return new f(i)}static trimesh(e,t,i){const r=new pe(e,t,i);return new f(r)}static cuboid(e,t,i){const r=new me(e,t,i);return new f(r)}static roundCuboid(e,t,i,r){const a=new fe(e,t,i,r);return new f(a)}static heightfield(e,t,i,r,a){const o=new Se(e,t,i,r,a);return new f(o)}static cylinder(e,t){const i=new ge(e,t);return new f(i)}static roundCylinder(e,t,i){const r=new Re(e,t,i);return new f(r)}static cone(e,t){const i=new be(e,t);return new f(i)}static roundCone(e,t,i){const r=new Ce(e,t,i);return new f(r)}static convexHull(e){const t=new V(e,null);return new f(t)}static convexMesh(e,t){const i=new V(e,t);return new f(i)}static roundConvexHull(e,t){const i=new j(e,null,t);return new f(i)}static roundConvexMesh(e,t,i){const r=new j(e,t,i);return new f(r)}setTranslation(e,t,i){if(typeof e!="number"||typeof t!="number"||typeof i!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:e,y:t,z:i},this}setRotation(e){return u.copy(this.rotation,e),this}setSensor(e){return this.isSensor=e,this}setEnabled(e){return this.enabled=e,this}setContactSkin(e){return this.contactSkin=e,this}setDensity(e){return this.massPropsMode=E.Density,this.density=e,this}setMass(e){return this.massPropsMode=E.Mass,this.mass=e,this}setMassProperties(e,t,i,r){return this.massPropsMode=E.MassProps,this.mass=e,n.copy(this.centerOfMass,t),n.copy(this.principalAngularInertia,i),u.copy(this.angularInertiaLocalFrame,r),this}setRestitution(e){return this.restitution=e,this}setFriction(e){return this.friction=e,this}setFrictionCombineRule(e){return this.frictionCombineRule=e,this}setRestitutionCombineRule(e){return this.restitutionCombineRule=e,this}setCollisionGroups(e){return this.collisionGroups=e,this}setSolverGroups(e){return this.solverGroups=e,this}setActiveHooks(e){return this.activeHooks=e,this}setActiveEvents(e){return this.activeEvents=e,this}setActiveCollisionTypes(e){return this.activeCollisionTypes=e,this}setContactForceEventThreshold(e){return this.contactForceEventThreshold=e,this}}class Ze{free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}constructor(e){this.raw=e||new pt,this.map=new F,e&&e.forEachColliderHandle(t=>{this.map.set(t,new k(this,t,null))})}castClosure(e){return t=>{if(e)return e(this.get(t))}}finalizeDeserialization(e){this.map.forEach(t=>t.finalizeDeserialization(e))}createCollider(e,t,i){let r=i!=null&&i!=null;if(r&&isNaN(i))throw Error("Cannot create a collider with a parent rigid-body handle that is not a number.");let a=t.shape.intoRaw(),o=n.intoRaw(t.translation),l=u.intoRaw(t.rotation),h=n.intoRaw(t.centerOfMass),c=n.intoRaw(t.principalAngularInertia),w=u.intoRaw(t.angularInertiaLocalFrame),d=this.raw.createCollider(t.enabled,a,o,l,t.massPropsMode,t.mass,h,c,w,t.density,t.friction,t.restitution,t.frictionCombineRule,t.restitutionCombineRule,t.isSensor,t.collisionGroups,t.solverGroups,t.activeCollisionTypes,t.activeHooks,t.activeEvents,t.contactForceEventThreshold,t.contactSkin,r,r?i:0,e.raw);a.free(),o.free(),l.free(),h.free(),c.free(),w.free();let p=r?e.get(i):null,m=new k(this,d,p,t.shape);return this.map.set(d,m),m}remove(e,t,i,r){this.raw.remove(e,t.raw,i.raw,r),this.unmap(e)}unmap(e){this.map.delete(e)}get(e){return this.map.get(e)}len(){return this.map.len()}contains(e){return this.get(e)!=null}forEach(e){this.map.forEach(e)}getAll(){return this.map.getAll()}}function Et(){return mt()}function At(s){ft(s)}const Dt=Object.freeze(Object.defineProperty({__proto__:null,get ActiveCollisionTypes(){return D},get ActiveEvents(){return M},get ActiveHooks(){return x},Ball:oe,BroadPhase:Oe,CCDSolver:We,Capsule:le,CharacterCollision:Ue,get CoefficientCombineRule(){return A},Collider:k,ColliderDesc:f,ColliderSet:Ze,ColliderShapeCastHit:Z,Cone:be,ConvexPolyhedron:V,Cuboid:me,Cylinder:ge,DebugRenderBuffers:He,DebugRenderPipeline:Be,DynamicRayCastVehicleController:Ke,EventQueue:yt,get FeatureType(){return St},FixedImpulseJoint:ve,FixedMultibodyJoint:De,GenericImpulseJoint:Te,HalfSpace:gt,get HeightFieldFlags(){return Rt},Heightfield:Se,ImpulseJoint:C,ImpulseJointSet:xe,IntegrationParameters:_e,IslandManager:Ge,get JointAxesMask(){return B},JointData:_,get JointType(){return S},KinematicCharacterController:Ye,get MassPropsMode(){return E},get MotorModel(){return H},MultibodyJoint:I,MultibodyJointSet:ze,NarrowPhase:Ve,PhysicsPipeline:Xe,get PidAxesMask(){return Y},PidController:Je,PointColliderProjection:G,PointProjection:se,Polyline:de,PrismaticImpulseJoint:Ee,PrismaticMultibodyJoint:Ne,Quaternion:bt,get QueryFilterFlags(){return K},Ray:Ct,RayColliderHit:ie,RayColliderIntersection:W,RayIntersection:ne,RevoluteImpulseJoint:Ae,RevoluteMultibodyJoint:Fe,RigidBody:X,RigidBodyDesc:P,RigidBodySet:Pe,get RigidBodyType(){return R},RopeImpulseJoint:Ie,RotationOps:u,RoundCone:Ce,RoundConvexPolyhedron:j,RoundCuboid:fe,RoundCylinder:Re,RoundTriangle:we,SdpMatrix3:Pt,SdpMatrix3Ops:z,Segment:he,SerializationPipeline:U,Shape:re,ShapeCastHit:ae,ShapeContact:O,get ShapeType(){return _t},get SolverFlags(){return J},SphericalImpulseJoint:Me,SphericalMultibodyJoint:Le,SpringImpulseJoint:ye,TempContactForceEvent:ke,TempContactManifold:je,TriMesh:pe,get TriMeshFlags(){return vt},Triangle:ce,UnitImpulseJoint:q,UnitMultibodyJoint:$,Vector3:It,VectorOps:n,Voxels:ue,World:L,reserveMemory:At,version:Et},Symbol.toStringTag,{value:"Module"}));export{D as ActiveCollisionTypes,M as ActiveEvents,x as ActiveHooks,oe as Ball,Oe as BroadPhase,We as CCDSolver,le as Capsule,Ue as CharacterCollision,A as CoefficientCombineRule,k as Collider,f as ColliderDesc,Ze as ColliderSet,Z as ColliderShapeCastHit,be as Cone,V as ConvexPolyhedron,me as Cuboid,ge as Cylinder,He as DebugRenderBuffers,Be as DebugRenderPipeline,Ke as DynamicRayCastVehicleController,yt as EventQueue,St as FeatureType,ve as FixedImpulseJoint,De as FixedMultibodyJoint,Te as GenericImpulseJoint,gt as HalfSpace,Rt as HeightFieldFlags,Se as Heightfield,C as ImpulseJoint,xe as ImpulseJointSet,_e as IntegrationParameters,Ge as IslandManager,B as JointAxesMask,_ as JointData,S as JointType,Ye as KinematicCharacterController,E as MassPropsMode,H as MotorModel,I as MultibodyJoint,ze as MultibodyJointSet,Ve as NarrowPhase,Xe as PhysicsPipeline,Y as PidAxesMask,Je as PidController,G as PointColliderProjection,se as PointProjection,de as Polyline,Ee as PrismaticImpulseJoint,Ne as PrismaticMultibodyJoint,bt as Quaternion,K as QueryFilterFlags,Ct as Ray,ie as RayColliderHit,W as RayColliderIntersection,ne as RayIntersection,Ae as RevoluteImpulseJoint,Fe as RevoluteMultibodyJoint,X as RigidBody,P as RigidBodyDesc,Pe as RigidBodySet,R as RigidBodyType,Ie as RopeImpulseJoint,u as RotationOps,Ce as RoundCone,j as RoundConvexPolyhedron,fe as RoundCuboid,Re as RoundCylinder,we as RoundTriangle,Pt as SdpMatrix3,z as SdpMatrix3Ops,he as Segment,U as SerializationPipeline,re as Shape,ae as ShapeCastHit,O as ShapeContact,_t as ShapeType,J as SolverFlags,Me as SphericalImpulseJoint,Le as SphericalMultibodyJoint,ye as SpringImpulseJoint,ke as TempContactForceEvent,je as TempContactManifold,pe as TriMesh,vt as TriMeshFlags,ce as Triangle,q as UnitImpulseJoint,$ as UnitMultibodyJoint,It as Vector3,n as VectorOps,ue as Voxels,L as World,Dt as default,At as reserveMemory,Et as version};
